
<!DOCTYPE html>
<html lang="it">
<!--
  Artist Mental Health Coach 
  Ideato e creato da: Francesco Mariano
  Data: 20 marzo 2023
  Contatti: francescomariano@gmail.com
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artist Mental Health Coach</title>

    <meta name="description" content="Un coach per il benessere mentale dedicato agli studenti delle Accademie di Belle Arti. Traccia il tuo mood, pratica esercizi creativi e ricevi supporto personalizzato con AI.">
    <meta name="author" content="Francesco Mariano">

    <meta property="og:title" content="Artist Mental Health Coach">
    <meta property="og:description" content="Un coach per il benessere mentale dedicato agli studenti delle Accademie di Belle Arti. Traccia il tuo mood, pratica esercizi creativi e ricevi supporto personalizzato con AI.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://i.imgur.com/placeholder.png">
    <meta property="og:url" content="https://tuodominio.com">
    <meta property="og:site_name" content="Artist Mental Health Coach">
    <meta property="og:locale" content="it_IT">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Artist Mental Health Coach">
    <meta name="twitter:description" content="Un coach per il benessere mentale dedicato agli studenti delle Accademie di Belle Arti. Traccia il tuo mood, pratica esercizi creativi e ricevi supporto personalizzato con AI.">
    <meta name="twitter:image" content="https://i.imgur.com/placeholder.png">

    <meta name="theme-color" content="#667eea">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .gradient-art {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const Heart = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>;
        const BookOpen = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>;
        const Wind = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z" /></svg>;
        const TrendingUp = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>;
        const Palette = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>;
        const Sparkles = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>;
        const Zap = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>;
        const Award = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="8" r="7" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.21 13.89L7 23l5-3 5 3-1.21-9.12" /></svg>;
        const Clock = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6l4 2" /></svg>;
        const Settings = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><circle cx="12" cy="12" r="3" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/></svg>;
        const Shuffle = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 3h5m0 0v5m0-5l-6 6M9 9L4 4m11 11l6 6m-6 0v-5m0 5h5" /></svg>;
        const Bot = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect width="18" height="10" x="3" y="11" rx="2" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><circle cx="12" cy="5" r="2" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 7v4M8 16h.01M16 16h.01" /></svg>;
        const RefreshCw = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M1 4v6h6M23 20v-6h-6" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15" /></svg>;
        const CheckCircle = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const X = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>;
        const Info = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 16v-4M12 8h.01" /></svg>;
        const Key = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" /></svg>;
        const AlertCircle = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4M12 16h.01" /></svg>;
        const Calendar = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect width="18" height="18" x="3" y="4" rx="2" ry="2" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 2v4M8 2v4M3 10h18" /></svg>;
        const Lightbulb = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>;
        const Volume2 = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5L6 9H2v6h4l5 4V5zM19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07" /></svg>;
        const Timer = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="13" r="9" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v5l3 3M9 2h6" /></svg>;
        const Play = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3l14 9-14 9V3z" /></svg>;
        const Pause = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 4h4v16H6zM14 4h4v16h-4z" /></svg>;
        const RotateCcw = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M1 4v6h6M3.51 15a9 9 0 1 0 2.13-9.36L1 10" /></svg>;
        const Camera = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z" /><circle cx="12" cy="13" r="4" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/></svg>;
        const Upload = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" /></svg>;
        const Image = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect width="18" height="18" x="3" y="3" rx="2" ry="2" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><circle cx="8.5" cy="8.5" r="1.5" strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 15l-5-5L5 21" /></svg>;
        const BarChart = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18 20V10M12 20V4M6 20v-6" /></svg>;
        const Brain = ({ className = "w-6 h-6" }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.75 9.75a3.75 3.75 0 015.25 5.25m1.5-8.5a3.75 3.75 0 01-4.5 6m-3.75-3.75A3.75 3.75 0 014.5 15M15 3.75c2.5 0 4.5 2 4.5 4.5s-2 4.5-4.5 4.5M9 3.75C6.5 3.75 4.5 5.75 4.5 8.25s2 4.5 4.5 4.5" /></svg>;

        const MentalHealthCoachArte = () => {
          const [currentView, setCurrentView] = useState('home');
          const [moodHistory, setMoodHistory] = useState(() => {
            const saved = localStorage.getItem('moodHistory');
            return saved ? JSON.parse(saved) : [];
          });
          const [journalEntries, setJournalEntries] = useState(() => {
            const saved = localStorage.getItem('journalEntries');
            return saved ? JSON.parse(saved) : [];
          });
          const [currentMood, setCurrentMood] = useState(null);
          const [geminiApiKey, setGeminiApiKey] = useState(localStorage.getItem('gemini_api_key') || '');
          const [showApiSetup, setShowApiSetup] = useState(false);
          const [selectedExercise, setSelectedExercise] = useState(null);
          const [currentVariant, setCurrentVariant] = useState(null);
          const [isGenerating, setIsGenerating] = useState(false);
          const [apiUsageMode, setApiUsageMode] = useState(false);
          const [showExamples, setShowExamples] = useState(false);

          const [timerActive, setTimerActive] = useState(false);
          const [timerSeconds, setTimerSeconds] = useState(0);
          const [timerDuration, setTimerDuration] = useState(0);
          const [uploadedImages, setUploadedImages] = useState(() => {
            const saved = localStorage.getItem('uploadedImages');
            return saved ? JSON.parse(saved) : [];
          });
          const [showInsights, setShowInsights] = useState(false);
          const [generatingReport, setGeneratingReport] = useState(false);
          const [uploadSuccess, setUploadSuccess] = useState(false);
          const [journalSaved, setJournalSaved] = useState(false);
          const [apiKeySaved, setApiKeySaved] = useState(false);
          const [successMessage, setSuccessMessage] = useState({ show: false, message: '', type: 'success' });
          const [savedReports, setSavedReports] = useState(() => {
            const saved = localStorage.getItem('aiReports');
            return saved ? JSON.parse(saved) : [];
          });
          const [showReportModal, setShowReportModal] = useState(false);
          const [currentReport, setCurrentReport] = useState(null);

          useEffect(() => {
            localStorage.setItem('moodHistory', JSON.stringify(moodHistory));
          }, [moodHistory]);

          useEffect(() => {
            localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
          }, [journalEntries]);

          useEffect(() => {
            localStorage.setItem('uploadedImages', JSON.stringify(uploadedImages));
          }, [uploadedImages]);

          useEffect(() => {
            localStorage.setItem('aiReports', JSON.stringify(savedReports));
          }, [savedReports]);

          useEffect(() => {
            let interval;
            if (timerActive && timerSeconds > 0) {
              interval = setInterval(() => {
                setTimerSeconds(prev => {
                  if (prev <= 1) {
                    setTimerActive(false);
                    playSound();
                    showNotification('Timer completato!', 'Il tempo per il tuo esercizio Ã¨ finito.');
                    return 0;
                  }
                  return prev - 1;
                });
              }, 1000);
            }
            return () => clearInterval(interval);
          }, [timerActive, timerSeconds]);

          const playSound = () => {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
          };

          const showNotification = (title, body) => {
            if ('Notification' in window && Notification.permission === 'granted') {
              new Notification(title, { body, icon: 'ğŸ¨' });
            } else if ('Notification' in window && Notification.permission !== 'denied') {
              Notification.requestPermission().then(permission => {
                if (permission === 'granted') {
                  new Notification(title, { body, icon: 'ğŸ¨' });
                }
              });
            }
          };

          const showSuccessMessage = (message, duration = 2000) => {
            setSuccessMessage({ show: true, message, type: 'success' });
            setTimeout(() => setSuccessMessage({ show: false, message: '', type: 'success' }), duration);
          };

          const parseDuration = (durationStr) => {
            const match = durationStr.match(/(\d+)\s*(min|sec|h)/i);
            if (!match) return 300;
            const value = parseInt(match[1]);
            const unit = match[2].toLowerCase();
            if (unit === 'sec') return value;
            if (unit === 'min') return value * 60;
            if (unit === 'h') return value * 3600;
            return 300;
          };

          const formatTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
          };

          const startTimer = (duration) => {
            const seconds = parseDuration(duration);
            setTimerDuration(seconds);
            setTimerSeconds(seconds);
            setTimerActive(true);
            showNotification('Timer avviato!', `Timer impostato per ${duration}`);
          };

          const pauseTimer = () => {
            setTimerActive(false);
          };

          const resumeTimer = () => {
            setTimerActive(true);
          };

          const resetTimer = () => {
            setTimerActive(false);
            setTimerSeconds(0);
            setTimerDuration(0);
          };

          const handleImageUpload = async (file) => {
            const validTypes = ['image/', '.heic', '.heif'];
            const isValid = validTypes.some(type =>
              file.type.startsWith(type) || file.name.toLowerCase().endsWith(type)
            );

            if (!file || !isValid) {
              alert('âš ï¸ Per favore carica un file immagine valido (jpg, png, heic, etc.)');
              return;
            }

            const reader = new FileReader();
            reader.onload = async (e) => {
              const imageData = {
                id: Date.now(),
                dataUrl: e.target.result,
                uploadDate: new Date().toISOString(),
                exerciseId: selectedExercise,
                exerciseTitle: currentVariant?.title || 'Esercizio',
                aiComment: null
              };

              if (geminiApiKey && apiUsageMode) {
                try {
                  const comment = await generateImageComment(e.target.result);
                  imageData.aiComment = comment;
                } catch (error) {
                  console.error('Errore generazione commento:', error);
                }
              }

              setUploadedImages(prev => [imageData, ...prev]);
              setUploadSuccess(true);
              setTimeout(() => setUploadSuccess(false), 2000);
            };
            reader.readAsDataURL(file);
          };

          const generateImageComment = async (imageDataUrl) => {
            if (!geminiApiKey) return null;

            try {
              const base64Image = imageDataUrl.split(',')[1];

              const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`,
                {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    contents: [{
                      parts: [
                        {
                          text: "Sei un critico d'arte empatico e incoraggiante per studenti di Belle Arti. Analizza quest'opera e fornisci: 1) Un commento positivo specifico (cosa funziona bene) 2) Un suggerimento costruttivo per migliorare 3) Un incoraggiamento personalizzato. Sii breve (max 4 frasi) ma specifico e sincero."
                        },
                        {
                          inline_data: {
                            mime_type: "image/jpeg",
                            data: base64Image
                          }
                        }
                      ]
                    }],
                    generationConfig: {
                      temperature: 0.7,
                      maxOutputTokens: 500,
                    }
                  })
                }
              );

              if (!response.ok) {
                throw new Error(`API Error: ${response.status}`);
              }

              const data = await response.json();
              return data.candidates[0].content.parts[0].text;
            } catch (error) {
              console.error('Errore generazione commento immagine:', error);
              return 'Bellissimo lavoro! Continua cosÃ¬! ğŸ¨';
            }
          };

          const deleteImage = (imageId) => {
            if (confirm('Sei sicuro di voler eliminare questa foto?')) {
              setUploadedImages(prev => prev.filter(img => img.id !== imageId));
            }
          };

          const calculateMoodStats = () => {
            if (moodHistory.length === 0) return null;

            const moodCounts = moodHistory.reduce((acc, entry) => {
              acc[entry.mood] = (acc[entry.mood] || 0) + 1;
              return acc;
            }, {});

            const totalMoods = moodHistory.length;
            const avgMood = moodHistory.reduce((sum, entry) => sum + entry.mood, 0) / totalMoods;

            const now = new Date();
            const sevenDaysAgo = new Date(now - 7 * 24 * 60 * 60 * 1000);
            const fourteenDaysAgo = new Date(now - 14 * 24 * 60 * 60 * 1000);

            const recentMoods = moodHistory.filter(e => new Date(e.date) >= sevenDaysAgo);
            const previousMoods = moodHistory.filter(e => {
              const d = new Date(e.date);
              return d >= fourteenDaysAgo && d < sevenDaysAgo;
            });

            const recentAvg = recentMoods.length > 0
              ? recentMoods.reduce((sum, e) => sum + e.mood, 0) / recentMoods.length
              : avgMood;
            const previousAvg = previousMoods.length > 0
              ? previousMoods.reduce((sum, e) => sum + e.mood, 0) / previousMoods.length
              : avgMood;

            const trend = recentAvg - previousAvg;

            return { moodCounts, avgMood, trend, recentMoods, totalMoods };
          };

          const findMoodPatterns = () => {
            const stats = calculateMoodStats();
            if (!stats) return [];

            const patterns = [];

            const dayOfWeekMoods = {};
            moodHistory.forEach(entry => {
              const day = new Date(entry.date).getDay();
              if (!dayOfWeekMoods[day]) dayOfWeekMoods[day] = [];
              dayOfWeekMoods[day].push(entry.mood);
            });

            const dayNames = ['Domenica', 'LunedÃ¬', 'MartedÃ¬', 'MercoledÃ¬', 'GiovedÃ¬', 'VenerdÃ¬', 'Sabato'];
            const dayAverages = Object.entries(dayOfWeekMoods).map(([day, moods]) => ({
              day: dayNames[day],
              avg: moods.reduce((a, b) => a + b, 0) / moods.length
            })).sort((a, b) => a.avg - b.avg);

            if (dayAverages.length > 0) {
              const worstDay = dayAverages[0];
              const bestDay = dayAverages[dayAverages.length - 1];
              if (worstDay.avg < 3) {
                patterns.push({
                  type: 'warning',
                  title: `${worstDay.day} Ã¨ il tuo giorno piÃ¹ difficile`,
                  description: `Media mood: ${worstDay.avg.toFixed(1)}/5`
                });
              }
              if (bestDay.avg > 3.5) {
                patterns.push({
                  type: 'positive',
                  title: `${bestDay.day} Ã¨ il tuo giorno migliore`,
                  description: `Media mood: ${bestDay.avg.toFixed(1)}/5`
                });
              }
            }

            let currentStreak = 0;
            let maxStreak = 0;
            moodHistory.slice().reverse().forEach(entry => {
              if (entry.mood >= 3) {
                currentStreak++;
                maxStreak = Math.max(maxStreak, currentStreak);
              } else {
                currentStreak = 0;
              }
            });

            if (maxStreak >= 3) {
              patterns.push({
                type: 'positive',
                title: `Streak di ${maxStreak} giorni positivi!`,
                description: 'Stai mantenendo un mood elevato'
              });
            }

            return patterns;
          };

          const generateAIReport = async () => {
            if (!geminiApiKey) {
              setShowApiSetup(true);
              return null;
            }

            const stats = calculateMoodStats();
            if (!stats) {
              alert('âš ï¸ Registra almeno un mood per generare un report AI');
              return null;
            }

            setGeneratingReport(true);

            try {
              const patterns = findMoodPatterns();

              const prompt = `Sei uno psicologo specializzato in supporto per studenti di Belle Arti. Analizza questi dati e genera un report empatico e motivante:

Dati:
- ${stats.totalMoods} registrazioni mood negli ultimi giorni
- Mood medio: ${stats.avgMood.toFixed(1)}/5
- Trend: ${stats.trend > 0 ? 'in miglioramento' : stats.trend < 0 ? 'in peggioramento' : 'stabile'}
- Pattern identificati: ${patterns.map(p => p.title).join(', ') || 'nessuno'}
- Numero immagini caricate: ${uploadedImages.length}
- Voci diario: ${journalEntries.length}

Genera un report strutturato con:
1. Sommario dello stato emotivo (2-3 frasi)
2. Punti di forza identificati
3. Aree da monitorare
4. 2-3 raccomandazioni concrete e personalizzate

Sii empatico, positivo ma realistico. Max 300 parole.`;

              console.log('ğŸ”„ Generazione report AI...');
              console.log('ğŸ“Š Stats:', stats);
              console.log('ğŸ“ˆ Patterns:', patterns);

              const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`,
                {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: {
                      temperature: 0.8,
                      maxOutputTokens: 1000,
                    }
                  })
                }
              );

              console.log('ğŸ“ Response status:', response.status);

              if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                console.error('âŒ API Error:', errorData);
                throw new Error(`API Error: ${response.status}`);
              }

              const data = await response.json();
              console.log('âœ… Dati ricevuti:', data);

              const report = data.candidates[0].content.parts[0].text;
              console.log('âœ… Report generato con successo');

              setGeneratingReport(false);
              return report;
            } catch (error) {
              console.error('ğŸ’¥ Errore generazione report:', error);
              alert(`âš ï¸ Errore nella generazione del report:\n\n${error.message}\n\nControlla la console (F12) per dettagli.`);
              setGeneratingReport(false);
              return null;
            }
          };

          const moods = [
            { id: 1, name: 'Ispirato', emoji: 'ğŸ¨', color: 'bg-purple-400' },
            { id: 2, name: 'Creativo', emoji: 'âœ¨', color: 'bg-blue-400' },
            { id: 3, name: 'Neutrale', emoji: 'ğŸ˜', color: 'bg-yellow-300' },
            { id: 4, name: 'Bloccato', emoji: 'ğŸ˜Ÿ', color: 'bg-orange-300' },
            { id: 5, name: 'Esausto', emoji: 'ğŸ˜«', color: 'bg-red-300' }
          ];

          const exerciseVariants = {
            'blocco-creativo': [
              {
                title: "5-Minute Ugly Sketch",
                description: "Disegna intenzionalmente brutto per liberarti dal perfezionismo",
                prompt: "Crea uno schizzo volutamente brutto. L'obiettivo Ã¨ sbagliare di proposito.",
                duration: "5 min",
                examples: [
                  "ğŸ­ Esempio 1: Ritratto usando solo la mano non dominante, senza guardare il foglio",
                  "ğŸŒ³ Esempio 2: Paesaggio con occhi chiusi, lascia che la mano vada dove vuole",
                  "ğŸ‘¤ Esempio 3: Autoritratto guardando solo lo specchio, MAI il foglio mentre disegni"
                ]
              },
              {
                title: "Wrong Medium Challenge",
                description: "Usa un materiale 'sbagliato' per il tuo stile abituale",
                prompt: "Se fai pittura, usa solo carboncino. Se fai scultura, prova l'acquerello. Esci dalla comfort zone.",
                duration: "20 min",
                examples: [
                  "ğŸ–Œï¸ Esempio 1: Pittore â†’ Usa argilla o fil di ferro per 'disegnare' nello spazio",
                  "ğŸ—¿ Esempio 2: Scultore â†’ Crea un'opera solo con collage di carta di giornale",
                  "ğŸ“¸ Esempio 3: Fotografo â†’ Disegna a matita ciÃ² che fotograferesti, senza macchina"
                ]
              },
              {
                title: "Public Art Session",
                description: "Crea arte in un luogo pubblico senza nasconderti",
                prompt: "Vai in un bar, parco o piazza. Lavora per 30 minuti. Accetta gli sguardi curiosi.",
                duration: "30 min",
                examples: [
                  "â˜• Esempio 1: Schizza avventori del bar, mostra il lavoro se chiedono",
                  "ğŸŒ³ Esempio 2: Dipingi en plein air in un parco affollato",
                  "ğŸš‰ Esempio 3: Urban sketching in una stazione, lascia il taccuino visibile"
                ]
              },
              {
                title: "Collaboration Chaos",
                description: "Inizia un'opera e lascia che altri la 'rovinino'",
                prompt: "Crea una base. Chiedi a 3 persone (anche non artisti) di aggiungere elementi. Accetta tutto.",
                duration: "45 min",
                examples: [
                  "ğŸ‘¥ Esempio 1: Tela con forme base â†’ Ognuno aggiunge colori random",
                  "âœï¸ Esempio 2: Disegno outline â†’ Altri riempiono con pattern a loro scelta",
                  "ğŸ­ Esempio 3: Scultura iniziale â†’ Altri attaccano oggetti trovati"
                ]
              },
              {
                title: "Speed Creation 30 Seconds",
                description: "Non c'Ã¨ tempo per giudicare",
                prompt: "Timer 30 secondi. Crea qualcosa di completo. Stop quando suona.",
                duration: "30 sec",
                examples: [
                  "âš¡ Esempio 1: Ritratto espressivo in 30 secondi, solo linee essenziali",
                  "ğŸ¨ Esempio 2: Composizione astratta, getta colori rapidamente",
                  "âœ‚ï¸ Esempio 3: Collage velocissimo, taglia e incolla senza pensare"
                ]
              },
              {
                title: "Childhood Art Recreation",
                description: "Disegna come quando avevi 5 anni",
                prompt: "Solo forme base: cerchi, linee, quadrati. Colori fuori dalle righe. Zero prospettiva.",
                duration: "15 min",
                examples: [
                  "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Esempio 1: Disegna la tua famiglia come un bambino (figure stilizzate, sole con faccina)",
                  "ğŸ  Esempio 2: Casa con albero e nuvole, tutto piatto e colorato",
                  "ğŸ¶ Esempio 3: Il tuo animale preferito, versione bambino (sproporzionato e buffo)"
                ]
              },
              {
                title: "No Eraser Challenge",
                description: "Ogni segno resta, ogni 'errore' diventa parte dell'opera",
                prompt: "Usa solo penna. Disegna qualcosa di complesso. Niente cancellature. Gli errori sono features.",
                duration: "20 min",
                examples: [
                  "ğŸ›ï¸ Esempio 1: Architettura complessa a penna, se sbagli integra l'errore",
                  "ğŸ‘¤ Esempio 2: Ritratto dal vero, linee doppie diventano ombreggiatura",
                  "ğŸŒ† Esempio 3: Cityscape, prospettive sbagliate creano stile surreale"
                ]
              },
              {
                title: "Backwards Process",
                description: "Inverti il tuo processo creativo abituale",
                prompt: "Se inizi con schizzi â†’ Inizia col colore. Se pianifichi â†’ Improvvisa totalmente.",
                duration: "30 min",
                examples: [
                  "ğŸ¨ Esempio 1: Stendi colori random prima, POI trova forme al loro interno",
                  "âœï¸ Esempio 2: Dipingi senza disegno preparatorio, lascia che emerga",
                  "ğŸ—¿ Esempio 3: Modella argilla senza progetto, scopri cosa diventa mentre lavori"
                ]
              },
              {
                title: "Anonymous Gallery Drop",
                description: "Crea e abbandona un'opera in pubblico, senza firmare",
                prompt: "Lascia un'opera finita in un luogo pubblico. Niente firma. Osserva da lontano le reazioni.",
                duration: "1 ora",
                examples: [
                  "ğŸ­ Esempio 1: Mini-tela in una panchina del parco",
                  "ğŸ“ Esempio 2: Disegno alla fermata dell'autobus con nota 'Portami a casa'",
                  "ğŸ¨ Esempio 3: Scultura di cartapesta in una biblioteca pubblica"
                ]
              },
              {
                title: "Criticism to Art",
                description: "Trasforma una critica ricevuta in opera creativa",
                prompt: "Ricorda una critica dura. Creane un'opera che la reinterpreta, la sfida, o la celebra ironicamente.",
                duration: "40 min",
                examples: [
                  "ğŸ’¬ Esempio 1: 'Troppo scuro' â†’ Opera intenzionalmente nerissima con solo un punto di luce",
                  "ğŸ¨ Esempio 2: 'Non tecnico' â†’ Collage di tecniche 'sbagliate' che funzionano insieme",
                  "ğŸ“ Esempio 3: 'Fuori prospettiva' â†’ Lavoro che celebra prospettive impossibili alla Escher"
                ]
              },
              {
                title: "Stream of Consciousness Painting",
                description: "Dipingi/disegna mentre pensi ad alta voce",
                prompt: "Registra audio mentre lavori. Parla di tutto ciÃ² che ti passa per la mente. Non fermarti nÃ© a pensare nÃ© a parlare.",
                duration: "20 min",
                examples: [
                  "ğŸ¤ Esempio 1: Acquerello astratto + monologo sulle tue giornata",
                  "ğŸ—£ï¸ Esempio 2: Disegno automatico mentre parli dei tuoi dubbi artistici",
                  "ğŸ’­ Esempio 3: Scultura + narrazione stream-of-consciousness della tua infanzia"
                ]
              },
              {
                title: "Opposite Style Day",
                description: "Fai l'esatto opposto del tuo stile",
                prompt: "Minimal? Oggi fai barocco. Realista? Oggi totalmente astratto. Colori caldi? Solo freddi.",
                duration: "1 ora",
                examples: [
                  "ğŸ”„ Esempio 1: Astrattista â†’ Ritratto iperrealista da foto",
                  "ğŸ­ Esempio 2: Figurativo â†’ Composizione totalmente non-oggettiva",
                  "ğŸŒˆ Esempio 3: Monocromatico â†’ Esplosione di tutti i colori possibili"
                ]
              },
              {
                title: "Found Objects Sculpture",
                description: "Crea solo con oggetti trovati casualmente",
                prompt: "30 minuti per raccogliere oggetti random. 30 minuti per assemblarli in un'opera. Niente acquisti.",
                duration: "1 ora",
                examples: [
                  "ğŸ—‘ï¸ Esempio 1: Scultura da rifiuti trovati per strada",
                  "ğŸ‚ Esempio 2: Installazione con solo elementi naturali (foglie, rami, sassi)",
                  "ğŸ“¦ Esempio 3: Assemblaggio di oggetti dismessi da casa (vecchie chiavi, bottoni, tappi)"
                ]
              },
              {
                title: "Time Limit Escalation",
                description: "Stessa opera in tempi progressivamente piÃ¹ stretti",
                prompt: "Versione 1: 30 min. Versione 2: 10 min. Versione 3: 2 min. Confronta i risultati.",
                duration: "42 min totali",
                examples: [
                  "â±ï¸ Esempio 1: Autoritratto in 3 versioni temporali diverse",
                  "ğŸ Esempio 2: Natura morta, diventa sempre piÃ¹ essenziale",
                  "ğŸ™ï¸ Esempio 3: Paesaggio urbano, scopri cosa Ã¨ davvero essenziale"
                ]
              },
              {
                title: "Blindfold Challenge",
                description: "Crea a occhi chiusi o bendati",
                prompt: "Benda sugli occhi per tutta la durata. Fidati del tatto e dell'istinto.",
                duration: "15 min",
                examples: [
                  "ğŸ‘ï¸ Esempio 1: Scultura in argilla bendato, lascia che le mani guidino",
                  "ğŸ¨ Esempio 2: Pittura a dita senza vedere, solo sensazioni tattili",
                  "âœï¸ Esempio 3: Disegno a carboncino bendato, senti la texture della carta"
                ]
              },
              {
                title: "Social Media Live Creation",
                description: "Crea dal vivo in diretta sui social",
                prompt: "Instagram/TikTok Live o registra video. Mostra errori, indecisioni, tutto il processo grezzo.",
                duration: "30 min",
                examples: [
                  "ğŸ“± Esempio 1: Time-lapse di un disegno, mostra TUTTI i tentativi falliti",
                  "ğŸ¥ Esempio 2: Live painting con commento in tempo reale dei tuoi dubbi",
                  "ğŸ“¸ Esempio 3: Stories progressive di un'opera, anche gli 'sbagli'"
                ]
              },
              {
                title: "Extreme Constraint Box",
                description: "Regole assurde che limitano drasticamente",
                prompt: "Solo 1 colore, 3 linee massimo, materiali assurdi. CreativitÃ  nasce da vincoli estremi.",
                duration: "25 min",
                examples: [
                  "ğŸ“ Esempio 1: Ritratto con SOLO 10 linee rette",
                  "ğŸ¨ Esempio 2: Paesaggio usando SOLO puntini (pointillism estremo)",
                  "âœ‚ï¸ Esempio 3: Composizione con SOLO forme circolari, niente altro"
                ]
              },
              {
                title: "Audience Choice Creation",
                description: "Il pubblico decide cosa crei",
                prompt: "Chiedi a 5 persone random: soggetto, colore dominante, tecnica. Devi usare TUTTI i suggerimenti.",
                duration: "40 min",
                examples: [
                  "ğŸ‘¥ Esempio 1: Sondaggio Instagram per scegliere tema + palette + stile",
                  "ğŸ² Esempio 2: Dadi con parole random, tira 3 volte, incorpora tutto",
                  "ğŸ“± Esempio 3: Chiedi ai passanti cosa disegnare, prendi primi 3 suggerimenti"
                ]
              },
              {
                title: "Destruction as Creation",
                description: "Crea distruggendo opere precedenti",
                prompt: "Prendi 3 vecchi lavori 'falliti'. Tagliali, strappali, riassemblali in qualcosa di nuovo.",
                duration: "35 min",
                examples: [
                  "âœ‚ï¸ Esempio 1: Collage da disegni bocciati, sovrapponi frammenti",
                  "ğŸ”¥ Esempio 2: Dipingi sopra a un vecchio dipinto, lascia trasparire il sotto",
                  "ğŸ­ Esempio 3: Scultura assemblando pezzi rotti di sculture precedenti"
                ]
              },
              {
                title: "Replica Impossibile",
                description: "Prova a rifare esattamente la stessa opera 5 volte",
                prompt: "Crea qualcosa. Ora rifallo identico altre 4 volte. Osserva come ogni tentativo Ã¨ diverso.",
                duration: "50 min",
                examples: [
                  "ğŸ” Esempio 1: Stesso ritratto 5 volte, nota le variazioni involontarie",
                  "ğŸ¨ Esempio 2: Stessa composizione astratta, diverge sempre piÃ¹",
                  "âœï¸ Esempio 3: Stesso schizzo rapido, celebra le differenze"
                ]
              }
            ],
            'mancanza-ispirazione': [
              {
                title: "Random Art Prompts Generator",
                description: "Tre parole casuali diventano un concept",
                prompt: "Genera 3 parole completamente random. Crea un'opera che le include tutte.",
                duration: "15 min",
                examples: [
                  "ğŸ² Esempio 1: 'Malinconia + Geometria + Blu' â†’ Opera geometrica fredda con mood triste",
                  "âœ¨ Esempio 2: 'Caos + Natura + Materiali riciclati' â†’ Installazione organica caotica",
                  "ğŸŒ™ Esempio 3: 'Memoria + Texture + Monocromo' â†’ Lavoro tattile sui ricordi"
                ]
              },
              {
                title: "Art History Mashup",
                description: "Combina due movimenti artistici opposti",
                prompt: "Rinascimento + Street Art, o Impressionismo + Futurismo. Crea l'impossibile fusione.",
                duration: "45 min",
                examples: [
                  "ğŸ›ï¸ Esempio 1: Venere di Botticelli in stile graffiti metropolitano",
                  "ğŸ¨ Esempio 2: Paesaggio impressionista con elementi cyberpunk",
                  "ğŸ—¿ Esempio 3: Scultura classica assemblata con materiali industriali"
                ]
              },
              {
                title: "Environment Inspiration Hunt",
                description: "Trova ispirazione negli oggetti piÃ¹ banali",
                prompt: "Fotografa 10 dettagli ignorati nella tua stanza. Usa quei pattern/forme/colori per un'opera.",
                duration: "30 min",
                examples: [
                  "ğŸ” Esempio 1: Texture del muro screpolato â†’ Dipinto astratto con stessa tessitura",
                  "ğŸ’¡ Esempio 2: Ombre delle piante sulla finestra â†’ Silhouette per un'opera",
                  "ğŸ“š Esempio 3: Colori random dei dorsi dei libri â†’ Palette per una composizione"
                ]
              },
              {
                title: "Music to Visual",
                description: "Traduci una canzone in arte visiva",
                prompt: "Scegli un brano. Ascoltalo 3 volte. Crea cosa 'vedi' mentre ascolti.",
                duration: "25 min",
                examples: [
                  "ğŸµ Esempio 1: Jazz â†’ Linee fluide e improvvisate, ritmo visivo",
                  "ğŸ¸ Esempio 2: Rock â†’ Composizione energetica con colori aggressivi",
                  "ğŸ» Esempio 3: Classica â†’ Forme armoniose e bilanciate"
                ]
              },
              {
                title: "Opposite Thinking Exercise",
                description: "Capovolgi completamente la tua idea iniziale",
                prompt: "Pensa a un progetto che vuoi fare. Ora fai l'ESATTO OPPOSTO di ogni scelta che avresti fatto.",
                duration: "20 min",
                examples: [
                  "â†”ï¸ Esempio 1: Volevi dipingere piccolo? Fai murale gigante",
                  "ğŸ”„ Esempio 2: Volevi soggetto serio? Fallo ironico e pop",
                  "âš¡ Esempio 3: Volevi processo lento? Completalo in 5 minuti"
                ]
              },
              {
                title: "Constraint Creativity Box",
                description: "Limiti estremi forzano soluzioni creative",
                prompt: "Scegli 3 limiti assurdi: solo 2 colori, solo forme triangolari, solo materiali riciclati, etc.",
                duration: "30 min",
                examples: [
                  "ğŸ“ Esempio 1: Solo bianco e nero + solo cerchi â†’ Op art geometrica",
                  "â™»ï¸ Esempio 2: Solo carta di giornale + solo colori primari",
                  "âœ‚ï¸ Esempio 3: Solo ritagli di riviste + nessuna figura umana"
                ]
              },
              {
                title: "Dream Journal Art",
                description: "Trasforma sogni recenti in opere visuali",
                prompt: "Ricorda un sogno degli ultimi giorni. Ricrealo visivamente, anche se assurdo o frammentato.",
                duration: "35 min",
                examples: [
                  "ğŸ’¤ Esempio 1: Sogno surreale â†’ Collage di elementi disconnessi ma emotivamente coerenti",
                  "ğŸŒ™ Esempio 2: Incubo â†’ Opera oscura che cattura l'atmosfera",
                  "âœ¨ Esempio 3: Sogno lucido â†’ Composizione iper-colorata e impossibile"
                ]
              },
              {
                title: "Childhood Nostalgia Mining",
                description: "Torna a cosa ti affascinava da bambino",
                prompt: "3 cose che adoravi a 8 anni. Incorporale in un progetto adulto maturo.",
                duration: "40 min",
                examples: [
                  "ğŸ¦– Esempio 1: Amavi dinosauri â†’ Serie artistica su estinzione e fossili",
                  "ğŸš€ Esempio 2: Amavi spazio â†’ Installazione su esplorazione e solitudine",
                  "ğŸ® Esempio 3: Amavi videogiochi â†’ Pixel art concettuale su realtÃ  virtuale"
                ]
              },
              {
                title: "Cultural Fusion Project",
                description: "Mescola elementi di culture diverse",
                prompt: "Scegli 2 culture lontane. Unisci simboli, pattern, stili artistici in un'opera ibrida.",
                duration: "50 min",
                examples: [
                  "ğŸ—¾ Esempio 1: Ukiyo-e giapponese + Art Nouveau europeo",
                  "ğŸŒ Esempio 2: Arte tribale africana + Minimalismo scandinavo",
                  "ğŸ­ Esempio 3: Mandala induisti + Street art latinoamericana"
                ]
              },
              {
                title: "Synesthesia Experiment",
                description: "Visualizza un senso con un altro",
                prompt: "Come appare il suono della pioggia? Che colore ha il lunedÃ¬? Che forma ha la felicitÃ ?",
                duration: "20 min",
                examples: [
                  "ğŸ‘ƒ Esempio 1: Dipingi l'odore del caffÃ¨ mattutino",
                  "ğŸ‘‚ Esempio 2: Disegna il suono del traffico cittadino",
                  "ğŸ‘… Esempio 3: Scultura che rappresenta il sapore del limone"
                ]
              },
              {
                title: "Time Traveler Artist",
                description: "Come sarebbe la tua arte in un'altra epoca?",
                prompt: "Immagina il tuo stile nel 1920, o nel 2120. Ricrea con tecniche/materiali di quell'epoca.",
                duration: "45 min",
                examples: [
                  "â° Esempio 1: Il tuo stile ma con tecniche rinascimentali",
                  "ğŸš€ Esempio 2: Il tuo soggetto ma in estetica cyberpunk futuristica",
                  "ğŸ“œ Esempio 3: La tua visione ma come manoscritto miniato medievale"
                ]
              },
              {
                title: "Emotion Color Mapping",
                description: "Palette emotiva diventa concept",
                prompt: "Scegli un'emozione complessa. Crea palette di 5 colori che la rappresenta. Opera basata solo su quella palette.",
                duration: "30 min",
                examples: [
                  "ğŸ˜Œ Esempio 1: 'Nostalgia' â†’ Palette seppia, ocra, blu polveroso",
                  "ğŸ˜° Esempio 2: 'Ansia' â†’ Giallo acido, grigio, verde elettrico",
                  "ğŸ¥° Esempio 3: 'Tenerezza' â†’ Rosa pallido, beige, lavanda"
                ]
              },
              {
                title: "Fictional Collaboration",
                description: "Lavora 'con' un artista che ammiri",
                prompt: "Se collaborassi con Frida Kahlo / Basquiat / Banksy, cosa creereste? Inizia tu la loro metÃ .",
                duration: "40 min",
                examples: [
                  "ğŸ¨ Esempio 1: MetÃ  opera nello stile di Van Gogh, metÃ  nel tuo",
                  "âœï¸ Esempio 2: Inizia come Picasso cubista, finisci con il tuo approccio",
                  "ğŸ–¼ï¸ Esempio 3: Composizione che fonde Klimt e la tua estetica"
                ]
              },
              {
                title: "Problem Solving Art",
                description: "Risolvi un problema reale con creativitÃ ",
                prompt: "Problema quotidiano (traffico, spreco, solitudine). 10 soluzioni creative visualizzate.",
                duration: "35 min",
                examples: [
                  "ğŸš— Esempio 1: Traffico â†’ Installazione su mobilitÃ  alternativa",
                  "ğŸŒ± Esempio 2: Plastica â†’ Sculture interamente da rifiuti plastici",
                  "ğŸ’” Esempio 3: Isolamento â†’ Opera partecipativa che connette persone"
                ]
              },
              {
                title: "ABC Rapid Ideas",
                description: "Un'idea per ogni lettera dell'alfabeto",
                prompt: "A = Arte cyberpunk, B = Bambini come tema, etc. Fino a Z. Lista completa in 15 minuti.",
                duration: "15 min",
                examples: [
                  "ğŸ“ Esempio 1: Mini-schizzi per ogni lettera, sviluppi 3 favoriti",
                  "ğŸ’¡ Esempio 2: Solo titoli, poi scegli quale realizzare",
                  "ğŸ¨ Esempio 3: Palette colori diversa per ogni lettera"
                ]
              },
              {
                title: "Scale Extremes",
                description: "Stessa opera, dimensioni estreme",
                prompt: "Versione 1: grande quanto un'unghia. Versione 2: grande quanto un muro. Confronta.",
                duration: "1 ora",
                examples: [
                  "ğŸ”¬ Esempio 1: Miniatura dettagliatissima vs murale essenziale",
                  "ğŸ“ Esempio 2: Scultura tascabile vs installazione ambientale",
                  "ğŸ¨ Esempio 3: Acquarello 5x5cm vs acrilico 2x2m"
                ]
              },
              {
                title: "Remix Your Favorite Artwork",
                description: "Reinterpreta un capolavoro nel tuo stile",
                prompt: "Opera famosa che ami. Ricreala completamente nel tuo linguaggio artistico.",
                duration: "50 min",
                examples: [
                  "ğŸ–¼ï¸ Esempio 1: 'La Notte Stellata' in stile urban collage",
                  "ğŸ‘© Esempio 2: 'Gioconda' in versione astratta espressionista",
                  "ğŸ Esempio 3: Natura morta barocca in pixel art"
                ]
              },
              {
                title: "Sensory Deprivation Creation",
                description: "Rimuovi un senso per amplificarne altri",
                prompt: "Lavora bendato, con tappi alle orecchie, o in silenzio totale. Intensifica altri sensi.",
                duration: "25 min",
                examples: [
                  "ğŸ™ˆ Esempio 1: Scultura a occhi chiusi, solo tatto guida",
                  "ğŸ™‰ Esempio 2: Dipinto in silenzio assoluto, concentrazione totale",
                  "ğŸ¨ Esempio 3: Disegno al buio, sorpresa quando accendi luce"
                ]
              },
              {
                title: "Weather as Co-Creator",
                description: "Elementi naturali partecipano alla creazione",
                prompt: "Lascia che pioggia, vento, sole modifichino l'opera mentre la crei all'aperto.",
                duration: "1 ora",
                examples: [
                  "ğŸŒ§ï¸ Esempio 1: Acquerello sotto pioggia leggera, effetti casuali",
                  "ğŸ’¨ Esempio 2: Scultura di sabbia, vento come collaboratore",
                  "â˜€ï¸ Esempio 3: Pittura al sole, osserva come luce cambia percezione"
                ]
              },
              {
                title: "Future Archaeologist",
                description: "Crea 'reperti' di una civiltÃ  futura",
                prompt: "Anno 3000. Gli archeologi trovano la tua opera. Cosa racconta della nostra epoca?",
                duration: "45 min",
                examples: [
                  "ğŸº Esempio 1: 'Vaso antico' del 2024 con simboli digitali",
                  "ğŸ“± Esempio 2: Smartphone fossilizzato come reperto",
                  "ğŸ—¿ Esempio 3: Totem che rappresenta la societÃ  dei social media"
                ]
              }
            ],
            'burnout-accademico': [
              {
                title: "5-Minute Brain Dump",
                description: "Scarica tutte le preoccupazioni su carta",
                prompt: "Timer 5 minuti. Scrivi TUTTO ciÃ² che ti stressa in Accademia, esami, progetti. Poi straccia.",
                duration: "5 min",
                examples: [
                  "ğŸ“ Esempio 1: Stream of consciousness su scadenze, poi brucialo",
                  "âœï¸ Esempio 2: Lista paure/ansie, poi disegnaci sopra patterns rilassanti",
                  "ğŸ—‘ï¸ Esempio 3: Lettera all'ansia, leggila ad alta voce, poi butta via"
                ]
              },
              {
                title: "Single Task Promise",
                description: "Oggi fai SOLO una cosa, ma fatta bene",
                prompt: "Lista di 10 cose da fare. Scegline UNA. Fai solo quella oggi. Ignora il resto.",
                duration: "Variabile",
                examples: [
                  "âœ… Esempio 1: Solo schizzi preparatori, niente altro",
                  "ğŸ¨ Esempio 2: Solo stesura colore base, stop",
                  "ğŸ“š Esempio 3: Solo ricerca referenze, niente produzione"
                ]
              },
              {
                title: "Digital Detox Studio Time",
                description: "2 ore di lavoro completamente offline",
                prompt: "Spegni telefono e PC. Lavora solo con mani e materiali fisici per 2 ore.",
                duration: "2 ore",
                examples: [
                  "ğŸ“µ Esempio 1: Solo matite e carta, niente digitale",
                  "ğŸš« Esempio 2: Modellazione argilla, zero distrazioni tech",
                  "ğŸ¨ Esempio 3: Pittura tradizionale, niente tutorial online"
                ]
              },
              {
                title: "Energy Audit Worksheet",
                description: "Mappa cosa ti drena e cosa ti ricarica",
                prompt: "Dividi foglio: sinistra = energy vampires, destra = energy boosters. Riorganizza prioritÃ .",
                duration: "15 min",
                examples: [
                  "ğŸ”‹ Esempio 1: Evita progetti che prosciugano, focalizza su quelli energizzanti",
                  "ğŸ’¡ Esempio 2: Identifica persone/situazioni tossiche, riduci esposizione",
                  "âš¡ Esempio 3: Pianifica attivitÃ  ricostituenti tra quelle impegnative"
                ]
              },
              {
                title: "Micro-Break Protocol",
                description: "Pause di 3 minuti ogni ora di lavoro",
                prompt: "Timer ogni 60 minuti. Stop 3 minuti: stretching, respiro, o guarda fuori. No schermi.",
                duration: "3 min x N",
                examples: [
                  "ğŸ§˜ Esempio 1: Stretching collo e spalle, sciogli tensioni",
                  "ğŸŒ¬ï¸ Esempio 2: 10 respiri profondi alla finestra",
                  "ğŸ‘€ Esempio 3: Palming (mani su occhi chiusi) per rilassare vista"
                ]
              },
              {
                title: "Permission to Be Mediocre",
                description: "Oggi il 60% di sforzo Ã¨ sufficiente",
                prompt: "Scegli un task. Fallo con il 60% dello sforzo abituale. Ãˆ abbastanza. Davvero.",
                duration: "Variabile",
                examples: [
                  "ğŸ“ Esempio 1: Schizzo abbozzato invece che finito",
                  "ğŸ¨ Esempio 2: Studio colore approssimativo, non resa finale",
                  "âœï¸ Esempio 3: Concept grezzo, non presentazione perfetta"
                ]
              },
              {
                title: "Passion Project 30 Minutes",
                description: "Lavora su qualcosa che AMI, non che devi fare",
                prompt: "30 minuti SOLO per progetto personale che ti entusiasma. Zero sensi di colpa.",
                duration: "30 min",
                examples: [
                  "ğŸ’œ Esempio 1: Illustrazione di fantasia che vuoi fare da mesi",
                  "ğŸ¨ Esempio 2: Tecnica nuova che vuoi sperimentare",
                  "âœ¨ Esempio 3: Serie personale che non c'entra con l'Accademia"
                ]
              },
              {
                title: "Say No Practice",
                description: "Declina educatamente una richiesta oggi",
                prompt: "Identifica qualcosa a cui puoi dire no. Pratica: 'Non posso in questo momento, grazie'.",
                duration: "5 min",
                examples: [
                  "ğŸš« Esempio 1: Collaborazione non essenziale che ti stressa",
                  "âŒ Esempio 2: Richiesta social che toglie tempo creativo",
                  "ğŸ›‘ Esempio 3: Impegno extra-accademico non fondamentale"
                ]
              },
              {
                title: "Body Scan Relaxation",
                description: "Rilassa sistematicamente ogni muscolo",
                prompt: "Sdraiati. Parti dai piedi, sali lentamente. Rilassa consapevolmente ogni parte del corpo.",
                duration: "15 min",
                examples: [
                  "ğŸ¦¶ Esempio 1: Piedi â†’ gambe â†’ bacino â†’ schiena â†’ spalle â†’ testa",
                  "ğŸ’† Esempio 2: Focus extra su zone tese (spalle, mandibola)",
                  "ğŸ˜Œ Esempio 3: Ripeti 2-3 volte se particolarmente stressato"
                ]
              },
              {
                title: "Gratitude Art Journal",
                description: "Disegna 5 cose per cui sei grato oggi",
                prompt: "Sketchbook: 5 mini-disegni di cose positive di oggi, anche minuscole.",
                duration: "10 min",
                examples: [
                  "â˜• Esempio 1: CaffÃ¨ buono, luce bella, amico che ha scritto",
                  "ğŸŒ Esempio 2: Progetto riuscito, pausa piacevole, bel tramonto",
                  "ğŸ’› Esempio 3: Illustra gratitudine per strumenti, spazio studio, salute"
                ]
              },
              {
                title: "Movement Snack",
                description: "5 minuti di movimento energizzante",
                prompt: "Metti musica. Muoviti liberamente 5 minuti: balla, salta, stretching dinamico.",
                duration: "5 min",
                examples: [
                  "ğŸ’ƒ Esempio 1: Balla una canzone che ami, scatenati",
                  "ğŸ¤¸ Esempio 2: Jumping jacks, stretching, movimenti ampi",
                  "ğŸ§˜ Esempio 3: Yoga flow veloce per riattivare corpo"
                ]
              },
              {
                title: "Sleep Hygiene Setup",
                description: "Crea rituale serale per dormire meglio",
                prompt: "30 min pre-sonno: no schermi, tisana, lettura o stretching. Ripeti ogni sera.",
                duration: "30 min",
                examples: [
                  "ğŸ“š Esempio 1: Lettura + camomilla + luci soffuse",
                  "ğŸ§˜ Esempio 2: Meditazione guidata + diario + respirazione",
                  "ğŸ¨ Esempio 3: Sketchbook rilassante + musica calma + routine"
                ]
              },
              {
                title: "Workload Triage",
                description: "Riorganizza prioritÃ  realisticamente",
                prompt: "Lista tutto. Categorie: Urgente, Importante, PuÃ² aspettare, Delegabile. Ricalcola deadline.",
                duration: "20 min",
                examples: [
                  "ğŸ“‹ Esempio 1: Esame settimana prossima = Urgente, tutorial online = Aspetta",
                  "âœ… Esempio 2: Portfolio = Importante, pulizia studio = Delega",
                  "ğŸ¯ Esempio 3: Progetto finale = Urgente+Importante, side project = Aspetta"
                ]
              },
              {
                title: "Forest Bath (Shinrin-yoku)",
                description: "Immersione consapevole nella natura",
                prompt: "40 minuti in parco/natura. Cammina lentamente. Osserva, annusa, tocca. Zero phone.",
                duration: "40 min",
                examples: [
                  "ğŸŒ³ Esempio 1: Parco cittadino, osserva alberi e uccelli",
                  "ğŸŒ¿ Esempio 2: Passeggiata in bosco, raccogli foglie interessanti",
                  "ğŸï¸ Esempio 3: Lago o fiume, ascolta suoni acqua"
                ]
              },
              {
                title: "Worry Time Container",
                description: "15 minuti dedicati SOLO a preoccuparti",
                prompt: "Scegli orario. 15 min per ansie. Fuori da quella finestra, rimanda le preoccupazioni.",
                duration: "15 min",
                examples: [
                  "â° Esempio 1: Ore 18:00 = worry time, resto giornata = zone free",
                  "ğŸ“ Esempio 2: Scrivi ansie durante il worry time, poi chiudi quaderno",
                  "ğŸš« Esempio 3: Quando preoccupazioni emergono fuori orario: 'Ci penso alle 18'"
                ]
              },
              {
                title: "Perfection Release Exercise",
                description: "Completa qualcosa al 70% e consideralo finito",
                prompt: "Progetto che procrastini per perfezionismo? Portalo a 70% e STOP. Ãˆ sufficiente.",
                duration: "Variabile",
                examples: [
                  "âœ… Esempio 1: Portfolio 'abbastanza buono' pubblicalo",
                  "ğŸ¨ Esempio 2: Opera '70% finita' = Done. Inizia nuova",
                  "ğŸ“± Esempio 3: Post social 'decente' pubblicalo, non perfetto"
                ]
              },
              {
                title: "Social Battery Check",
                description: "Valuta se hai bisogno di persone o solitudine",
                prompt: "Chiediti: energia sociale alta o bassa? Onora risposta. Ok dire no a uscite, ok chiedere compagnia.",
                duration: "5 min",
                examples: [
                  "ğŸ‘¥ Esempio 1: Batteria bassa â†’ Declina inviti, ricaricati da solo",
                  "ğŸ¤— Esempio 2: Batteria alta â†’ Chiama amico, studia in compagnia",
                  "âš–ï¸ Esempio 3: Alterna giorni sociali e giorni solitari"
                ]
              },
              {
                title: "Breathing Reset 4-7-8",
                description: "Tecnica respirazione per calmare sistema nervoso",
                prompt: "Inspira 4 secondi, trattieni 7, espira 8. Ripeti 4 cicli. Resetta ansia acuta.",
                duration: "2 min",
                examples: [
                  "ğŸŒ¬ï¸ Esempio 1: Prima di presentazioni o esami",
                  "ğŸ˜° Esempio 2: Quando senti ansia salire improvvisamente",
                  "ğŸ§˜ Esempio 3: Al mattino per iniziare giornata calmo"
                ]
              },
              {
                title: "Studio Environment Reset",
                description: "Riorganizza spazio lavoro per energia fresca",
                prompt: "20 minuti: pulisci, riordina, cambia disposizione. Nuovo spazio = nuova energia.",
                duration: "20 min",
                examples: [
                  "ğŸ§¹ Esempio 1: Rimuovi progetti vecchi, spazio pulito",
                  "ğŸ’¡ Esempio 2: Cambia illuminazione, aggiungi pianta",
                  "ğŸ¨ Esempio 3: Organizza materiali per accessibilitÃ "
                ]
              },
              {
                title: "Self-Compassion Letter",
                description: "Scrivi a te stesso come faresti con un amico",
                prompt: "Cosa ti stai rimproverando? Scrivi cosa diresti a un amico nella stessa situazione.",
                duration: "10 min",
                examples: [
                  "ğŸ’Œ Esempio 1: 'Sono indietro' â†’ 'Stai facendo del tuo meglio'",
                  "ğŸ’™ Esempio 2: 'Ho sbagliato' â†’ 'Errori sono apprendimento'",
                  "ğŸ¤— Esempio 3: 'Non sono abbastanza' â†’ 'Stai crescendo, serve tempo'"
                ]
              }
            ],
            'ansia-critica': [
              {
                title: "Small Wins Inventory",
                description: "Celebra anche i successi minuscoli",
                prompt: "5 cose piccole che hai fatto oggi, anche solo alzarti o fare colazione. Sono vittorie.",
                duration: "5 min",
                examples: [
                  "âœ¨ Esempio 1: Mi sono alzato â†’ Ho fatto stretching â†’ Ho aperto sketchbook",
                  "ğŸ¨ Esempio 2: Ho mescolato colori â†’ Ho fatto un segno â†’ Ho continuato",
                  "ğŸ’ª Esempio 3: Sono andato in Accademia â†’ Ho parlato con prof â†’ Ho iniziato progetto"
                ]
              },
              {
                title: "Pre-Critique Ritual",
                description: "Routine calmante prima di revisioni/esami",
                prompt: "3 azioni ripetitive che fai sempre prima di critiche. Diventa Ã ncora di sicurezza.",
                duration: "10 min",
                examples: [
                  "ğŸ§˜ Esempio 1: Respiro 4-7-8 + Mantra + Visualizzazione positiva",
                  "ğŸµ Esempio 2: Canzone specifica + Stretching + Affermazioni",
                  "â˜• Esempio 3: CaffÃ¨ rituale + Ripassare punti chiave + Toccare talismano"
                ]
              },
              {
                title: "Expectation vs Reality",
                description: "Confronta paure con probabilitÃ  reali",
                prompt: "Colonna 1: Cosa temi succeda. Colonna 2: Cosa probabilmente succederÃ  davvero.",
                duration: "10 min",
                examples: [
                  "ğŸ˜° Esempio 1: Paura: 'Diranno che faccio schifo' â†’ RealtÃ : 'Daranno feedback costruttivi'",
                  "ğŸ“ Esempio 2: Paura: 'BoccerÃ² esame' â†’ RealtÃ : 'Ho studiato, probabile passare'",
                  "ğŸ¨ Esempio 3: Paura: 'Rideranno del mio lavoro' â†’ RealtÃ : 'Critiche tecniche, non personali'"
                ]
              },
              {
                title: "Past Success Recall",
                description: "Ricorda quando hai giÃ  fatto bene",
                prompt: "3 situazioni simili passate dove hai avuto successo. Cosa ti ha aiutato allora?",
                duration: "8 min",
                examples: [
                  "ğŸ† Esempio 1: Esame anno scorso â†’ Preparazione + Respirazione â†’ Passato con 27",
                  "âœ… Esempio 2: Presentazione progetto â†’ Prove + Supporto amici â†’ Buon feedback",
                  "ğŸ¨ Esempio 3: Mostra collettiva â†’ Lavoro autentico + Fiducia â†’ Apprezzamenti"
                ]
              },
              {
                title: "Lower the Bar Day",
                description: "Ridefinisci successo in modo raggiungibile",
                prompt: "Invece di 'Devo essere perfetto', definisci successo come 'FarÃ² del mio meglio oggi'.",
                duration: "5 min",
                examples: [
                  "ğŸ“Š Esempio 1: Successo = Completare progetto, non farlo perfetto",
                  "ğŸ¯ Esempio 2: Successo = Presentare, non avere standing ovation",
                  "âœ… Esempio 3: Successo = Migliorare di 1%, non essere il migliore"
                ]
              },
              {
                title: "Body Anchoring Technique",
                description: "Gesto fisico che ti riporta a calma",
                prompt: "Scegli gesto (toccare pollice-indice, mano sul cuore). Usalo quando ansioso.",
                duration: "3 min",
                examples: [
                  "ğŸ¤² Esempio 1: Pollice-indice = Ã ncora di calma, praticala in momenti sereni",
                  "ğŸ’“ Esempio 2: Mano sul cuore + respiro profondo = auto-conforto",
                  "âœŠ Esempio 3: Pugno gentile = segnale a te stesso 'Ce la fai'"
                ]
              },
              {
                title: "Visualization Practice",
                description: "Immagina performance di successo",
                prompt: "Chiudi occhi. Visualizza te stesso che presenti/esponi con calma e competenza. Dettagli sensoriali.",
                duration: "10 min",
                examples: [
                  "ğŸ¬ Esempio 1: Ti vedi parlare chiaramente, prof annuiscono, ti senti sicuro",
                  "ğŸ–¼ï¸ Esempio 2: Immagina opera esposta, persone interessate, feedback positivi",
                  "ğŸ“ Esempio 3: Esame: rispondi con calma, mostri lavoro, va bene"
                ]
              },
              {
                title: "Worst Case Scenario Acceptance",
                description: "Affronta la paura peggiore, poi ridimensionala",
                prompt: "Scenario peggiore possibile. Poi: Come sopravviveresti comunque? Ridimensiona paura.",
                duration: "12 min",
                examples: [
                  "ğŸ’­ Esempio 1: Peggio: 'Bocciato' â†’ Sopravvivenza: 'Ripeto esame, imparo, passo'",
                  "ğŸ˜° Esempio 2: Peggio: 'Critica devastante' â†’ 'UserÃ² feedback, migliorerÃ²'",
                  "ğŸ¨ Esempio 3: Peggio: 'Opera non apprezzata' â†’ 'FarÃ² altro, crescerÃ²'"
                ]
              },
              {
                title: "Affirmation Recording",
                description: "La tua voce che ti incoraggia",
                prompt: "Registra 5 affermazioni positive. Ascoltale in loop prima di eventi stressanti.",
                duration: "10 min",
                examples: [
                  "ğŸ¤ Esempio 1: 'Sono capace' / 'Ho lavorato duramente' / 'Merito successo'",
                  "ğŸ’ª Esempio 2: 'Ho talento' / 'Posso gestire critiche' / 'Sto crescendo'",
                  "âœ¨ Esempio 3: 'Sono artista valido' / 'Il mio lavoro ha valore' / 'Ce la farÃ²'"
                ]
              },
              {
                title: "Progress Not Perfection",
                description: "Celebra il miglioramento, non solo il risultato",
                prompt: "3 modi in cui sei migliorato nell'ultimo mese, anche piccoli progressi.",
                duration: "7 min",
                examples: [
                  "ğŸ“ˆ Esempio 1: Disegno prospettiva meglio di prima, anche se non perfetto",
                  "ğŸ¨ Esempio 2: Gestisco critiche piÃ¹ serenamente che a inizio anno",
                  "ğŸ’ª Esempio 3: Finisco progetti piÃ¹ velocemente, anche se non al 100%"
                ]
              },
              {
                title: "Comparison Detox",
                description: "Sfida confronti dannosi con altri",
                prompt: "Chi stai confrontando con te? Scrivi 3 motivi per cui confronto non Ã¨ valido/utile.",
                duration: "8 min",
                examples: [
                  "ğŸ‘¥ Esempio 1: 'Loro hanno diverso background/tempo/risorse'",
                  "ğŸ¯ Esempio 2: 'Vedo solo loro risultato, non loro processo/difficoltÃ '",
                  "âœ¨ Esempio 3: 'Il mio percorso Ã¨ unico, non misurabile con metri altri'"
                ]
              },
              {
                title: "Feedback Filter Practice",
                description: "Distingui critica costruttiva da proiezione",
                prompt: "Ultimo feedback ricevuto. Quali parti utili? Quali proiezioni personali di chi critica?",
                duration: "10 min",
                examples: [
                  "ğŸ’¬ Esempio 1: Utile: 'Proporzioni da migliorare' / Proiezione: 'Troppo audace'",
                  "ğŸ¨ Esempio 2: Utile: 'Tecnica X da studiare' / Proiezione: 'Non il mio stile'",
                  "âœ… Esempio 3: Prendo critiche tecniche, ignoro giudizi di gusto personale"
                ]
              },
              {
                title: "Grounding 5-4-3-2-1",
                description: "Tecnica sensoriale per ansia acuta pre-critica",
                prompt: "5 cose che vedi, 4 che tocchi, 3 che senti, 2 che annusi, 1 che assapori. Riporta a presente.",
                duration: "4 min",
                examples: [
                  "ğŸ‘€ Esempio 1: Prima di entrare in aula critica, fai esercizio fuori porta",
                  "ğŸ§  Esempio 2: Durante pausa esame, reset con 5-4-3-2-1",
                  "âœ‹ Esempio 3: In attesa risultati, ancÃ²rati al presente con esercizio"
                ]
              },
              {
                title: "Process vs Outcome Focus",
                description: "Controlla il controllabile, lascia andare il resto",
                prompt: "Controlli: impegno, preparazione, presenza. Non controlli: voto, reazione prof, confronto con altri.",
                duration: "10 min",
                examples: [
                  "âœ… Esempio 1: Focus su: 'Ho dato il massimo nella ricerca e esecuzione'",
                  "ğŸ¯ Esempio 2: Focus su: 'Presento con chiarezza ciÃ² che ho fatto'",
                  "ğŸ’ª Esempio 3: Lascia andare: 'Se piacerÃ ', 'Se avrÃ² voto alto'"
                ]
              },
              {
                title: "Support Network Activation",
                description: "Chi puÃ² supportarti prima/durante/dopo critiche",
                prompt: "3 persone che puoi contattare quando ansioso. Salvale come 'Supporto Esame'.",
                duration: "5 min",
                examples: [
                  "ğŸ‘¥ Esempio 1: Amico X per pep talk, Amico Y per distrazione post-esame",
                  "ğŸ’™ Esempio 2: Compagno corso per studiare insieme, Mentor per dubbi",
                  "ğŸ¤— Esempio 3: Familiare per supporto emotivo, Collega per confronto tecnico"
                ]
              },
              {
                title: "Post-Critique Debrief",
                description: "Analizza oggettivamente dopo critiche/esami",
                prompt: "Cosa Ã¨ andato bene? 1 cosa da migliorare? 1 lezione appresa? No catastrofizzazione.",
                duration: "15 min",
                examples: [
                  "ğŸ“ Esempio 1: Bene: presentazione chiara / Migliorare: gestione tempo / Lezione: preparare scaletta",
                  "âœ… Esempio 2: Bene: concept forte / Migliorare: tecnica colore / Lezione: piÃ¹ prove colore",
                  "ğŸ¯ Esempio 3: Focus su dati oggettivi, non su emozioni del momento"
                ]
              },
              {
                title: "Identity Decoupling",
                description: "Separa il tuo valore dal tuo risultato",
                prompt: "Completa: 'Il mio valore come persona NON dipende da [voto/critica/performance]'.",
                duration: "5 min",
                examples: [
                  "ğŸ’ Esempio 1: 'Valgo come persona indipendentemente dal voto di oggi'",
                  "âœ¨ Esempio 2: 'Un progetto bocciato non mi rende fallimento'",
                  "ğŸŒŸ Esempio 3: 'Il mio valore artistico non si misura con una critica'"
                ]
              },
              {
                title: "Energy Management Pre-Critique",
                description: "Ottimizza energia fisica prima di performance",
                prompt: "Piano giorno prima: cosa mangiare, quando dormire, come muoversi per energia ottimale.",
                duration: "20 min",
                examples: [
                  "ğŸ¥— Esempio 1: Cena leggera sera prima, colazione proteica, idratazione",
                  "ğŸ˜´ Esempio 2: Letto presto, 8 ore sonno, sveglia con tempo",
                  "ğŸƒ Esempio 3: Passeggiata mattina, stretching, evita caffeina eccessiva"
                ]
              },
              {
                title: "Reframe Anxiety as Excitement",
                description: "Trasforma nervosismo in energia positiva",
                prompt: "Quando senti ansia, dÃ¬ ad alta voce: 'Sono eccitato per questa opportunitÃ '. Corpo non sa differenza.",
                duration: "2 min",
                examples: [
                  "ğŸ‰ Esempio 1: Battito veloce? 'Sono carico per mostrare il mio lavoro!'",
                  "âš¡ Esempio 2: Mani sudate? 'Sono entusiasta di questa presentazione!'",
                  "âœ¨ Esempio 3: Respiro corto? 'Sono energizzato per questa sfida!'"
                ]
              },
              {
                title: "Mentor Visualization",
                description: "Immagina il tuo mentore che ti incoraggia",
                prompt: "Chiudi occhi. Immagina artista/prof/persona che ammiri che ti dice parole di supporto.",
                duration: "7 min",
                examples: [
                  "ğŸ‘¨â€ğŸ¨ Esempio 1: Van Gogh ti dice: 'Esprimi la tua visione, non cercare approvazione'",
                  "ğŸ‘©â€ğŸ« Esempio 2: Prof preferito: 'Hai lavorato bene, mostra con fiducia'",
                  "ğŸ¨ Esempio 3: Artista ammirato: 'Anche io ho avuto critiche, fa parte del percorso'"
                ]
              }
            ]
          };

          const exerciseCategories = [
            {
              id: 'blocco-creativo',
              title: 'Blocco Creativo',
              description: 'Supera perfezionismo e paura del foglio bianco',
              icon: Palette,
              color: 'from-purple-400 to-purple-600',
              variantsCount: 20
            },
            {
              id: 'mancanza-ispirazione',
              title: 'Mancanza Ispirazione',
              description: 'Ritrova idee fresche e prospettive nuove',
              icon: Lightbulb,
              color: 'from-blue-400 to-blue-600',
              variantsCount: 20
            },
            {
              id: 'burnout-accademico',
              title: 'Burnout Accademico',
              description: 'Gestisci stress da progetti e scadenze',
              icon: Zap,
              color: 'from-orange-400 to-orange-600',
              variantsCount: 20
            },
            {
              id: 'ansia-critica',
              title: 'Ansia da Critica',
              description: 'Affronta revisioni ed esami con serenitÃ ',
              icon: Award,
              color: 'from-pink-400 to-pink-600',
              variantsCount: 20
            }
          ];

          const getRandomVariant = (category) => {
            const variants = exerciseVariants[category];
            return variants[Math.floor(Math.random() * variants.length)];
          };

          const generateWithGemini = async (category) => {
            if (!geminiApiKey) {
              alert('âš ï¸ Configura prima la tua API key di Gemini nelle impostazioni!');
              setShowApiSetup(true);
              return null;
            }

            const prompts = {
              'blocco-creativo': 'Sei un coach per studenti di Belle Arti. Genera un esercizio creativo per superare blocco creativo e perfezionismo. Deve essere pratico (5-30 min), provocatorio ma sicuro, focalizzato sull\'azione artistica concreta. Includi 3 esempi diversi. Rispondi SOLO con JSON: {"title": "Nome", "description": "Descrizione", "prompt": "Istruzioni", "duration": "Tempo", "examples": ["Esempio 1: ...", "Esempio 2: ...", "Esempio 3: ..."]}',
              'mancanza-ispirazione': 'Sei un coach creativo per artisti. Genera esercizio per sbloccare ispirazione. Deve stimolare pensiero divergente, essere divertente, generare idee fresche. Includi 3 esempi pratici. Rispondi SOLO con JSON: {"title": "Nome", "description": "Descrizione", "prompt": "Istruzioni", "duration": "Tempo", "examples": ["Esempio 1: ...", "Esempio 2: ...", "Esempio 3: ..."]}',
              'burnout-accademico': 'Sei uno specialista di benessere per studenti di Accademia belle ARti. Genera esercizio pratico per gestire stress accademico e burnout. Deve essere rilassante, fattibile anche con poca energia, dare sollievo concreto. Includi 3 varianti. Rispondi SOLO con JSON: {"title": "Nome", "description": "Descrizione", "prompt": "Istruzioni", "duration": "Tempo", "examples": ["Esempio 1: ...", "Esempio 2: ...", "Esempio 3: ..."]}',
              'ansia-critica': 'Sei un coach per gestire ansia da performance artistica. Genera esercizio per affrontare critiche, revisioni, esami con calma. Deve ridurre ansia, aumentare fiducia, separare valore personale dal giudizio. Includi 3 applicazioni diverse. Rispondi SOLO con JSON: {"title": "Nome", "description": "Descrizione", "prompt": "Istruzioni", "duration": "Tempo", "examples": ["Esempio 1: ...", "Esempio 2: ...", "Esempio 3: ..."]}'
            };

            setIsGenerating(true);
            
            try {
              console.log('ğŸ”„ Chiamata API Gemini...');
              console.log('ğŸ“ API Key presente:', geminiApiKey ? 'SÃ¬' : 'No');
              console.log('ğŸ“ Lunghezza API Key:', geminiApiKey?.length);

              const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`,
                {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({
                    contents: [{
                      parts: [{
                        text: prompts[category]
                      }]
                    }],
                    generationConfig: {
                      temperature: 0.9,
                      topK: 40,
                      topP: 0.95,
                      maxOutputTokens: 2048,
                    }
                  })
                }
              );

              console.log('ğŸ“ Response status:', response.status);
              console.log('ğŸ“ Response ok:', response.ok);

              if (!response.ok) {
                const errorData = await response.json().catch(() => ({ error: 'Impossibile leggere risposta' }));
                console.error('âŒ Errore API completo:', JSON.stringify(errorData, null, 2));

                let errorMessage = 'Errore sconosciuto';
                if (errorData.error) {
                  if (errorData.error.code === 400) {
                    errorMessage = 'API Key non valida o formato richiesta errato';
                  } else if (errorData.error.code === 403) {
                    errorMessage = 'API Key non autorizzata. Verifica che l\'API Gemini sia abilitata nel tuo progetto Google Cloud';
                  } else if (errorData.error.code === 429) {
                    errorMessage = 'Limite rate raggiunto. Riprova tra qualche minuto';
                  } else {
                    errorMessage = errorData.error.message || `Errore ${errorData.error.code}`;
                  }
                }

                throw new Error(errorMessage);
              }

              const data = await response.json();
              console.log('ğŸ“ Risposta API ricevuta:', data);

              if (!data.candidates || !data.candidates[0] || !data.candidates[0].content) {
                console.error('âŒ Struttura risposta non valida:', data);
                throw new Error('Risposta API non valida: struttura mancante');
              }

              const generatedText = data.candidates[0].content.parts[0].text;
              console.log('ğŸ“ Testo generato:', generatedText.substring(0, 200) + '...');

              const jsonMatch = generatedText.match(/\{[\s\S]*?\}/);

              if (jsonMatch) {
                const exercise = JSON.parse(jsonMatch[0]);
                setIsGenerating(false);
                console.log('âœ… Esercizio generato con successo');
                return exercise;
              } else {
                setIsGenerating(false);
                console.log('âš ï¸ Formato JSON non trovato, uso testo raw');
                return {
                  title: "Esercizio Generato da AI",
                  description: "Esercizio personalizzato",
                  prompt: generatedText,
                  duration: "15 min",
                  examples: []
                };
              }
            } catch (error) {
              console.error('ğŸ’¥ Errore completo:', error);
              console.error('ğŸ’¥ Stack trace:', error.stack);
              alert(`âš ï¸ Errore nella generazione:\n\n${error.message}\n\nControlla la console del browser (F12) per maggiori dettagli.`);
              setIsGenerating(false);
              return null;
            }
          };

          const saveApiKey = () => {
            localStorage.setItem('gemini_api_key', geminiApiKey);
            setShowApiSetup(false);
            setApiKeySaved(true);
            setTimeout(() => setApiKeySaved(false), 2000);
          };

          const HomeView = () => (
            <div className="space-y-6">
              <div className="text-center py-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl">
                <h1 className="text-4xl font-bold text-gray-800 mb-2">ğŸ¨ Artist Mental Health Coach</h1>
                <p className="text-gray-600 text-lg">Per Studenti e Artisti</p>
                <p className="text-gray-500 text-sm mt-2">Il tuo supporto personale per il benessere creativo</p>
              </div>
              
              <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                <button
                  onClick={() => setCurrentView('mood')}
                  className="card-hover p-6 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl text-white shadow-lg"
                >
                  <Heart className="w-12 h-12 mb-3" />
                  <h3 className="text-xl font-semibold mb-2">Traccia il tuo Umore</h3>
                  <p className="text-blue-100">Come ti senti oggi?</p>
                </button>

                <button
                  onClick={() => setCurrentView('journal')}
                  className="card-hover p-6 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl text-white shadow-lg"
                >
                  <BookOpen className="w-12 h-12 mb-3" />
                  <h3 className="text-xl font-semibold mb-2">Diario Creativo</h3>
                  <p className="text-purple-100">Scrivi pensieri e riflessioni</p>
                </button>

                <button
                  onClick={() => setCurrentView('exercises')}
                  className="card-hover p-6 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl text-white shadow-lg"
                >
                  <Wind className="w-12 h-12 mb-3" />
                  <h3 className="text-xl font-semibold mb-2">Esercizi Guidati</h3>
                  <p className="text-green-100">80+ pratiche per il benessere</p>
                </button>

                <button
                  onClick={() => setCurrentView('progress')}
                  className="card-hover p-6 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl text-white shadow-lg"
                >
                  <TrendingUp className="w-12 h-12 mb-3" />
                  <h3 className="text-xl font-semibold mb-2">I Tuoi Progressi</h3>
                  <p className="text-orange-100">Visualizza il tuo percorso</p>
                </button>

                <button
                  onClick={() => setCurrentView('insights')}
                  className="card-hover p-6 bg-gradient-to-br from-pink-400 to-rose-600 rounded-2xl text-white shadow-lg"
                >
                  <Brain className="w-12 h-12 mb-3" />
                  <h3 className="text-xl font-semibold mb-2">Analisi & Insights</h3>
                  <p className="text-pink-100">Scopri pattern e ricevi feedback AI</p>
                </button>
              </div>

              <div className="bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-xl border-2 border-purple-200">
                <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                  <Sparkles className="w-6 h-6 text-purple-600" />
                  Progettato per Artisti e Studenti
                </h3>
                <p className="text-gray-700 mb-2">
                  Esercizi specifici per Studenti e Artisti: gestisci blocco creativo, burnout da progetti, 
                  ansia da critica e ritrova l'ispirazione.
                </p>
                <p className="text-gray-600 text-sm">
                  âœ¨ 80 esercizi con 3 esempi ciascuno |  Diario | Analisi risultati
                </p>
              </div>
            </div>
          );

          const MoodView = () => (
            <div className="space-y-6">
              <h2 className="text-3xl font-bold text-gray-800">Come ti senti oggi?</h2>
              <p className="text-gray-600">Traccia il tuo stato emotivo quotidiano</p>
              
              <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
                {moods.map(mood => (
                  <button
                    key={mood.id}
                    onClick={() => {
                      setCurrentMood(mood);
                      setMoodHistory([...moodHistory, { ...mood, date: new Date().toISOString() }]);
                    }}
                    className={`${mood.color} p-6 rounded-xl hover:scale-105 transition-transform shadow-md`}
                  >
                    <div className="text-5xl mb-2">{mood.emoji}</div>
                    <p className="text-gray-800 font-semibold">{mood.name}</p>
                  </button>
                ))}
              </div>

              {currentMood && (
                <div className="bg-white p-6 rounded-xl border-2 border-green-400 shadow-lg animate-fadeIn">
                  <h3 className="text-xl font-semibold mb-2 flex items-center gap-2">
                    <CheckCircle className="w-6 h-6 text-green-600" />
                    Registrato!
                  </h3>
                  <p className="text-gray-600">
                    Hai registrato: <span className="font-bold text-lg">{currentMood.name}</span> {currentMood.emoji}
                  </p>
                </div>
              )}

              <button 
                onClick={() => setCurrentView('home')} 
                className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
              >
                â† Torna Home
              </button>
            </div>
          );

          const JournalView = () => {
            const [entry, setEntry] = useState('');
            
            const saveEntry = () => {
              if (entry.trim()) {
                setJournalEntries([...journalEntries, { text: entry, date: new Date().toISOString() }]);
                setEntry('');
                setJournalSaved(true);
                setTimeout(() => setJournalSaved(false), 2000);
              }
            };

            return (
              <div className="space-y-6 relative">
                {journalSaved && (
                  <div className="absolute top-0 right-0 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-fadeIn z-10">
                    <CheckCircle className="w-5 h-5" />
                    Diario salvato!
                  </div>
                )}

                <h2 className="text-3xl font-bold text-gray-800">Il tuo Diario Creativo</h2>
                <p className="text-gray-600">Scrivi pensieri, riflessioni, ispirazioni</p>
                
                <textarea
                  value={entry}
                  onChange={(e) => setEntry(e.target.value)}
                  placeholder="Scrivi liberamente qui... Pensieri su progetti, ispirazioni, dubbi, successi..."
                  className="w-full h-64 p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none resize-none"
                />
                
                <button 
                  onClick={saveEntry}
                  className="px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"
                >
                  ğŸ’¾ Salva Entrata
                </button>

                <div className="space-y-4">
                  <h3 className="text-xl font-semibold">Entrate Precedenti:</h3>
                  {journalEntries.length === 0 ? (
                    <p className="text-gray-500 italic">Nessuna entrata ancora. Inizia a scrivere!</p>
                  ) : (
                    <div className="space-y-3">
                      {journalEntries.slice().reverse().map((e, i) => (
                        <div key={i} className="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
                          <p className="text-gray-600 text-sm mb-2 font-semibold">
                            ğŸ“… {new Date(e.date).toLocaleDateString('it-IT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
                          </p>
                          <p className="text-gray-800 whitespace-pre-wrap">{e.text}</p>
                        </div>
                      ))}
                    </div>
                  )}
                </div>

                <button 
                  onClick={() => setCurrentView('home')} 
                  className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
                >
                  â† Torna Home
                </button>
              </div>
            );
          };

          const ExercisesView = () => (
            <div className="space-y-6">
              <div className="flex justify-between items-center flex-wrap gap-4">
                <div>
                  <h2 className="text-3xl font-bold text-gray-800">Esercizi per Artisti</h2>
                  <p className="text-gray-600 mt-1">Scegli una categoria per iniziare</p>
                </div>
                <button 
                  onClick={() => setShowApiSetup(true)} 
                  className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:opacity-90 transition-opacity"
                >
                  <Settings className="w-5 h-5" />
                  API Settings
                </button>
              </div>

              <div className="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg">
                <div className="flex items-start gap-3">
                  <Info className="w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0" />
                  <div>
                    <p className="text-blue-900 font-semibold mb-1">ğŸ’¡ Come funziona</p>
                    <p className="text-blue-800 text-sm">
                      Ogni esercizio include <strong>3 esempi pratici</strong> diversi. 
                      Click su <Shuffle className="w-4 h-4 inline" /> per cambiare esercizio, 
                      o attiva <Bot className="w-4 h-4 inline" /> modalitÃ  API per contenuti AI infiniti!
                    </p>
                  </div>
                </div>
              </div>

              <div className="grid md:grid-cols-2 gap-4">
                {exerciseCategories.map(category => (
                  <button
                    key={category.id}
                    onClick={() => {
                      setSelectedExercise(category.id);
                      setCurrentVariant(getRandomVariant(category.id));
                      setCurrentView('exercise-detail');
                    }}
                    className={`card-hover p-6 bg-gradient-to-br ${category.color} rounded-2xl text-white shadow-lg relative`}
                  >
                    <div className="absolute top-4 right-4 bg-white/20 backdrop-blur px-3 py-1 rounded-full text-sm font-semibold">
                      {category.variantsCount} esercizi
                    </div>
                    <category.icon className="w-12 h-12 mb-3" />
                    <h3 className="text-xl font-semibold mb-2">{category.title}</h3>
                    <p className="text-white/90">{category.description}</p>
                  </button>
                ))}
              </div>

              <button 
                onClick={() => setCurrentView('home')} 
                className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
              >
                â† Torna Home
              </button>
            </div>
          );

          const ExerciseDetailView = () => {
            if (!currentVariant) return null;
            
            const categoryData = exerciseCategories.find(c => c.id === selectedExercise);
            
            const loadNewVariant = async () => {
              if (apiUsageMode) {
                const generated = await generateWithGemini(selectedExercise);
                if (generated) setCurrentVariant(generated);
              } else {
                setCurrentVariant(getRandomVariant(selectedExercise));
              }
            };

            return (
              <div className="space-y-6">
                <div className="flex justify-between items-start flex-wrap gap-4">
                  <div>
                    <h2 className="text-3xl font-bold text-gray-800">{categoryData.title}</h2>
                    <p className="text-gray-600 mt-1">{categoryData.description}</p>
                  </div>
                  <button
                    onClick={() => setApiUsageMode(!apiUsageMode)}
                    className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${
                      apiUsageMode
                        ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white'
                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    }`}
                  >
                    <Bot className="w-5 h-5" />
                    {apiUsageMode ? 'ModalitÃ  online (richiesta API)' : 'ModalitÃ  offline (no API)'}
                  </button>
                </div>

                <div className={`bg-gradient-to-br ${categoryData.color} p-8 rounded-2xl text-white relative shadow-2xl`}>
                  {apiUsageMode && (
                    <div className="absolute top-4 right-4 bg-white/20 backdrop-blur px-3 py-1.5 rounded-full text-sm font-semibold flex items-center gap-1">
                      <Bot className="w-4 h-4" />
                      AI Generated
                    </div>
                  )}
                  
                  <div className="flex items-start justify-between mb-4 flex-wrap gap-3">
                    <div className="flex-1 min-w-[200px]">
                      <h3 className="text-2xl font-bold mb-2">{currentVariant.title}</h3>
                      <p className="text-white/90 text-lg">{currentVariant.description}</p>
                    </div>
                    <div className="flex items-center gap-2 bg-white/20 backdrop-blur px-4 py-2 rounded-full flex-shrink-0">
                      <Clock className="w-5 h-5" />
                      <span className="font-semibold">{currentVariant.duration}</span>
                    </div>
                  </div>

                  <div className="bg-white/10 backdrop-blur p-6 rounded-xl mb-4">
                    <p className="text-lg leading-relaxed">{currentVariant.prompt}</p>
                  </div>

                  <div className="bg-white/10 backdrop-blur p-6 rounded-xl mb-4">
                    <div className="flex items-center justify-between flex-wrap gap-4">
                      <div className="flex items-center gap-3">
                        <Timer className="w-6 h-6" />
                        <span className="text-xl font-bold">
                          {timerSeconds > 0 ? formatTime(timerSeconds) : currentVariant.duration}
                        </span>
                        {timerActive && timerDuration > 0 && (
                          <div className="text-sm opacity-80">
                            ({Math.round((timerSeconds / timerDuration) * 100)}% rimanente)
                          </div>
                        )}
                      </div>
                      <div className="flex gap-2">
                        {timerSeconds === 0 ? (
                          <button
                            onClick={() => startTimer(currentVariant.duration)}
                            className="flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all"
                          >
                            <Play className="w-5 h-5" />
                            Avvia Timer
                          </button>
                        ) : (
                          <>
                            <button
                              onClick={timerActive ? pauseTimer : resumeTimer}
                              className="flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all"
                            >
                              {timerActive ? (
                                <>
                                  <Pause className="w-5 h-5" />
                                  Pausa
                                </>
                              ) : (
                                <>
                                  <Play className="w-5 h-5" />
                                  Riprendi
                                </>
                              )}
                            </button>
                            <button
                              onClick={resetTimer}
                              className="flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-all"
                            >
                              <RotateCcw className="w-5 h-5" />
                              Reset
                            </button>
                          </>
                        )}
                      </div>
                    </div>
                    {timerActive && timerDuration > 0 && (
                      <div className="mt-3 bg-white/20 rounded-full h-2 overflow-hidden">
                        <div
                          className="bg-white h-full transition-all duration-1000"
                          style={{ width: `${(timerSeconds / timerDuration) * 100}%` }}
                        />
                      </div>
                    )}
                  </div>

                  {currentVariant.examples && currentVariant.examples.length > 0 && (
                    <div className="bg-white/10 backdrop-blur p-6 rounded-xl">
                      <button
                        onClick={() => setShowExamples(!showExamples)}
                        className="flex items-center gap-2 font-semibold mb-3 hover:text-white/80 transition-colors"
                      >
                        <Lightbulb className="w-5 h-5" />
                        {showExamples ? 'Nascondi' : 'Mostra'} 3 Esempi Pratici
                        <span className="text-sm ml-2">({showExamples ? 'â–¼' : 'â–¶'})</span>
                      </button>
                      
                      {showExamples && (
                        <div className="space-y-3 mt-4 animate-fadeIn">
                          {currentVariant.examples.map((example, idx) => (
                            <div key={idx} className="bg-white/10 p-4 rounded-lg">
                              <p className="leading-relaxed">{example}</p>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                  )}

                  <div className="flex gap-3 mt-6 flex-wrap">
                    <button
                      onClick={loadNewVariant}
                      disabled={isGenerating}
                      className="flex-1 min-w-[200px] flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur px-6 py-3 rounded-xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      {isGenerating ? (
                        <>
                          <RefreshCw className="w-5 h-5 animate-spin" />
                          Generando...
                        </>
                      ) : (
                        <>
                          <Shuffle className="w-5 h-5" />
                          {apiUsageMode ? 'Genera con AI' : 'Nuovo Esercizio'}
                        </>
                      )}
                    </button>
                    
                    <button className="flex items-center justify-center gap-2 bg-white text-gray-800 hover:bg-gray-100 px-6 py-3 rounded-xl font-semibold transition-all">
                      <CheckCircle className="w-5 h-5" />
                      Completato
                    </button>
                  </div>
                </div>

                <div className="bg-white p-6 rounded-2xl shadow-lg relative">
                  {uploadSuccess && (
                    <div className="absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-fadeIn z-10">
                      <CheckCircle className="w-5 h-5" />
                      Immagine caricata con successo!
                    </div>
                  )}

                  <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <Camera className="w-6 h-6" />
                    Carica il tuo Lavoro
                  </h3>
                  <p className="text-gray-600 mb-4">
                    Condividi un'immagine del tuo esercizio e ricevi un feedback dall'AI (se attivata)
                  </p>

                  <label className="flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl cursor-pointer hover:from-purple-600 hover:to-pink-600 transition-all">
                    <Upload className="w-5 h-5" />
                    <span className="font-semibold">Seleziona Immagine</span>
                    <input
                      type="file"
                      accept="image/*,.heic,.heif"
                      className="hidden"
                      onChange={(e) => {
                        if (e.target.files[0]) {
                          handleImageUpload(e.target.files[0]);
                          e.target.value = '';
                        }
                      }}
                    />
                  </label>

                  {uploadedImages.filter(img => img.exerciseId === selectedExercise).length > 0 && (
                    <div className="mt-6">
                      <h4 className="text-lg font-semibold text-gray-800 mb-3">Le tue immagini per questo esercizio:</h4>
                      <div className="grid md:grid-cols-2 gap-4">
                        {uploadedImages
                          .filter(img => img.exerciseId === selectedExercise)
                          .map(img => (
                            <div key={img.id} className="bg-gray-50 rounded-lg overflow-hidden shadow">
                              <img src={img.dataUrl} alt="Lavoro artistico" className="w-full h-48 object-cover" />
                              <div className="p-4">
                                <div className="flex justify-between items-start mb-2">
                                  <span className="text-sm text-gray-500">
                                    {new Date(img.uploadDate).toLocaleDateString('it-IT')}
                                  </span>
                                  <button
                                    onClick={() => deleteImage(img.id)}
                                    className="text-red-500 hover:text-red-700"
                                    title="Elimina"
                                  >
                                    <X className="w-5 h-5" />
                                  </button>
                                </div>
                                {img.aiComment && (
                                  <div className="bg-white p-3 rounded-lg text-sm text-gray-700 border-l-4 border-purple-500">
                                    <div className="flex items-start gap-2">
                                      <Bot className="w-5 h-5 text-purple-500 flex-shrink-0 mt-0.5" />
                                      <p>{img.aiComment}</p>
                                    </div>
                                  </div>
                                )}
                              </div>
                            </div>
                          ))}
                      </div>
                    </div>
                  )}
                </div>

                <button
                  onClick={() => setCurrentView('exercises')}
                  className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
                >
                  â† Torna agli Esercizi
                </button>
              </div>
            );
          };

          const ProgressView = () => (
            <div className="space-y-6">
              <h2 className="text-3xl font-bold text-gray-800">I Tuoi Progressi</h2>
              
              <div className="grid md:grid-cols-3 gap-4">
                <div className="bg-blue-100 p-6 rounded-xl shadow-md">
                  <Calendar className="w-10 h-10 text-blue-600 mb-3" />
                  <h3 className="text-3xl font-bold text-gray-800">{moodHistory.length}</h3>
                  <p className="text-gray-600">Tracciamenti Umore</p>
                </div>

                <div className="bg-purple-100 p-6 rounded-xl shadow-md">
                  <BookOpen className="w-10 h-10 text-purple-600 mb-3" />
                  <h3 className="text-3xl font-bold text-gray-800">{journalEntries.length}</h3>
                  <p className="text-gray-600">Entrate Diario</p>
                </div>

                <div className="bg-green-100 p-6 rounded-xl shadow-md">
                  <TrendingUp className="w-10 h-10 text-green-600 mb-3" />
                  <h3 className="text-3xl font-bold text-gray-800">{Math.max(1, moodHistory.length + journalEntries.length)}</h3>
                  <p className="text-gray-600">Giorni Attivi</p>
                </div>
              </div>

              <div className="bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                <h3 className="text-xl font-semibold mb-4">Storico Umore Recente</h3>
                {moodHistory.length === 0 ? (
                  <p className="text-gray-500 italic">Inizia a tracciare il tuo umore per vedere i progressi!</p>
                ) : (
                  <div className="space-y-2">
                    {moodHistory.slice(-10).reverse().map((mood, i) => (
                      <div key={i} className="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                        <span className="text-3xl">{mood.emoji}</span>
                        <div className="flex-1">
                          <p className="font-semibold">{mood.name}</p>
                          <p className="text-sm text-gray-500">
                            {new Date(mood.date).toLocaleDateString('it-IT', { weekday: 'long', day: 'numeric', month: 'long' })}
                          </p>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>

              <button 
                onClick={() => setCurrentView('home')} 
                className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
              >
                â† Torna Home
              </button>
            </div>
          );

          const InsightsView = () => {
            const [aiReport, setAiReport] = React.useState(null);
            const stats = calculateMoodStats();
            const patterns = findMoodPatterns();

            const handleGenerateReport = async () => {
              console.log('ğŸ”˜ Click su Genera Report');

              const report = await generateAIReport();
              console.log('ğŸ“„ Report ricevuto:', !!report);

              if (report) {
                const reportData = {
                  id: Date.now(),
                  content: report,
                  date: new Date().toISOString(),
                  stats: {
                    totalMoods: stats?.totalMoods || 0,
                    avgMood: stats?.avgMood || 0,
                    trend: stats?.trend || 0
                  }
                };

                setSavedReports(prev => [reportData, ...prev]);

                setCurrentReport(reportData);
                setShowReportModal(true);

                const wordCount = report.split(/\s+/).length;
                const duration = (wordCount / 2) * 1000;
                console.log(`ğŸ“Š ${wordCount} parole, durata: ${duration}ms (${duration/1000}s)`);

                setTimeout(() => {
                  setShowReportModal(false);
                }, duration);

                console.log('âœ… Report salvato e visualizzato');
              } else {
                console.log('âš ï¸ Nessun report generato');
              }
            };

            console.log('ğŸ¨ Render InsightsView - aiReport:', !!aiReport, aiReport ? `(${aiReport.length} caratteri)` : 'null');

            return (
              <div className="space-y-6">
                <h2 className="text-3xl font-bold text-gray-800 flex items-center gap-3">
                  <Brain className="w-10 h-10" />
                  Analisi & Insights
                </h2>

                <div className="grid md:grid-cols-4 gap-4">
                  <div className="bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-xl shadow-lg text-white">
                    <Calendar className="w-8 h-8 mb-2 opacity-80" />
                    <h3 className="text-3xl font-bold">{stats?.totalMoods || 0}</h3>
                    <p className="text-blue-100">Mood tracciati</p>
                  </div>

                  <div className="bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-xl shadow-lg text-white">
                    <Heart className="w-8 h-8 mb-2 opacity-80" />
                    <h3 className="text-3xl font-bold">{stats?.avgMood.toFixed(1) || '0'}/5</h3>
                    <p className="text-purple-100">Mood medio</p>
                  </div>

                  <div className="bg-gradient-to-br from-pink-400 to-pink-600 p-6 rounded-xl shadow-lg text-white">
                    <Image className="w-8 h-8 mb-2 opacity-80" />
                    <h3 className="text-3xl font-bold">{uploadedImages.length}</h3>
                    <p className="text-pink-100">Immagini caricate</p>
                  </div>

                  <div className="bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-xl shadow-lg text-white">
                    <TrendingUp className="w-8 h-8 mb-2 opacity-80" />
                    <h3 className="text-3xl font-bold">
                      {stats?.trend > 0 ? 'ğŸ“ˆ' : stats?.trend < 0 ? 'ğŸ“‰' : 'â¡ï¸'}
                    </h3>
                    <p className="text-green-100">
                      {stats?.trend > 0 ? 'In miglioramento' : stats?.trend < 0 ? 'Da monitorare' : 'Stabile'}
                    </p>
                  </div>
                </div>

                {patterns.length > 0 && (
                  <div className="bg-white p-6 rounded-2xl shadow-lg">
                    <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <Sparkles className="w-6 h-6 text-yellow-500" />
                      Pattern Identificati
                    </h3>
                    <div className="grid md:grid-cols-2 gap-4">
                      {patterns.map((pattern, idx) => (
                        <div
                          key={idx}
                          className={`p-4 rounded-lg border-2 ${
                            pattern.type === 'positive'
                              ? 'bg-green-50 border-green-300'
                              : 'bg-orange-50 border-orange-300'
                          }`}
                        >
                          <h4 className="font-semibold text-gray-800 mb-1">{pattern.title}</h4>
                          <p className="text-sm text-gray-600">{pattern.description}</p>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {stats && stats.recentMoods.length > 0 && (
                  <div className="bg-white p-6 rounded-2xl shadow-lg">
                    <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <BarChart className="w-6 h-6" />
                      Mood Ultimi 7 Giorni
                    </h3>
                    <div className="space-y-3">
                      {stats.recentMoods.slice(-7).reverse().map((entry, idx) => (
                        <div key={idx} className="flex items-center gap-3">
                          <div className="w-32 text-sm text-gray-600">
                            {new Date(entry.date).toLocaleDateString('it-IT', { weekday: 'short', day: 'numeric', month: 'short' })}
                          </div>
                          <div className="flex-1 bg-gray-200 rounded-full h-8 overflow-hidden">
                            <div
                              className={`h-full flex items-center px-3 text-white font-semibold ${
                                entry.mood >= 4 ? 'bg-green-500' :
                                entry.mood === 3 ? 'bg-yellow-500' :
                                'bg-orange-500'
                              }`}
                              style={{ width: `${(entry.mood / 5) * 100}%` }}
                            >
                              {entry.emoji} {entry.name}
                            </div>
                          </div>
                          <div className="w-12 text-right font-bold text-gray-700">
                            {entry.mood}/5
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <div className="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-2xl border-2 border-purple-200">
                  <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                    <Bot className="w-6 h-6 text-purple-600" />
                    Genera Nuovo Report AI
                  </h3>

                  <div className="text-center py-6">
                    <p className="text-gray-600 mb-4">
                      Genera un report personalizzato basato sui tuoi dati
                    </p>
                    <button
                      onClick={handleGenerateReport}
                      disabled={generatingReport}
                      className="flex items-center justify-center gap-2 mx-auto px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      {generatingReport ? (
                        <>
                          <RefreshCw className="w-5 h-5 animate-spin" />
                          Generazione in corso...
                        </>
                      ) : (
                        <>
                          <Sparkles className="w-5 h-5" />
                          Genera Report AI
                        </>
                      )}
                    </button>
                  </div>
                </div>

                {uploadedImages.length > 0 && (
                  <div className="bg-white p-6 rounded-2xl shadow-lg">
                    <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <Camera className="w-6 h-6" />
                      Galleria Lavori ({uploadedImages.length})
                    </h3>
                    <div className="grid md:grid-cols-3 gap-4">
                      {uploadedImages.map(img => (
                        <div key={img.id} className="bg-gray-50 rounded-lg overflow-hidden shadow hover:shadow-lg transition-shadow">
                          <img src={img.dataUrl} alt="Lavoro" className="w-full h-40 object-cover" />
                          <div className="p-3">
                            <p className="text-sm font-semibold text-gray-800">{img.exerciseTitle}</p>
                            <p className="text-xs text-gray-500">{new Date(img.uploadDate).toLocaleDateString('it-IT')}</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                {savedReports.length > 0 && (
                  <div className="bg-white p-6 rounded-2xl shadow-lg">
                    <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                      <FileText className="w-6 h-6 text-purple-600" />
                      Report Storici ({savedReports.length})
                    </h3>
                    <div className="space-y-4">
                      {savedReports.map(report => (
                        <div
                          key={report.id}
                          className="bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-xl border-2 border-purple-200 hover:shadow-md transition-shadow cursor-pointer"
                          onClick={() => {
                            setCurrentReport(report);
                            setShowReportModal(true);
                          }}
                        >
                          <div className="flex justify-between items-start mb-3">
                            <div className="flex items-center gap-2">
                              <Bot className="w-5 h-5 text-purple-600" />
                              <span className="font-semibold text-gray-800">
                                {new Date(report.date).toLocaleDateString('it-IT', {
                                  day: 'numeric',
                                  month: 'short',
                                  year: 'numeric',
                                  hour: '2-digit',
                                  minute: '2-digit'
                                })}
                              </span>
                            </div>
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                const updatedReports = savedReports.filter(r => r.id !== report.id);
                                setSavedReports(updatedReports);
                                localStorage.setItem('aiReports', JSON.stringify(updatedReports));
                              }}
                              className="p-1 hover:bg-red-100 rounded-lg transition-colors"
                              title="Elimina report"
                            >
                              <Trash2 className="w-4 h-4 text-red-500" />
                            </button>
                          </div>

                          <div className="grid grid-cols-3 gap-3 mb-3 text-sm">
                            <div className="bg-white/60 rounded-lg p-2 text-center">
                              <div className="font-bold text-purple-600">{report.stats.totalMoods}</div>
                              <div className="text-xs text-gray-600">Mood</div>
                            </div>
                            <div className="bg-white/60 rounded-lg p-2 text-center">
                              <div className="font-bold text-pink-600">{report.stats.avgMood.toFixed(1)}/5</div>
                              <div className="text-xs text-gray-600">Media</div>
                            </div>
                            <div className="bg-white/60 rounded-lg p-2 text-center">
                              <div className={`font-bold ${report.stats.trend > 0 ? 'text-green-600' : report.stats.trend < 0 ? 'text-orange-600' : 'text-gray-600'}`}>
                                {report.stats.trend > 0 ? '+' : ''}{report.stats.trend.toFixed(1)}%
                              </div>
                              <div className="text-xs text-gray-600">Trend</div>
                            </div>
                          </div>

                          <p className="text-sm text-gray-600 line-clamp-2">
                            {report.content.substring(0, 150)}...
                          </p>

                          <div className="mt-3 text-sm text-purple-600 font-semibold flex items-center gap-1">
                            Leggi report completo
                            <ChevronRight className="w-4 h-4" />
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}

                <button
                  onClick={() => setCurrentView('home')}
                  className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
                >
                  â† Torna Home
                </button>
              </div>
            );
          };

          const ReportModal = () => {
            if (!showReportModal || !currentReport) return null;

            return (
              <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn">
                <div className="bg-white rounded-2xl max-w-3xl w-full max-h-[85vh] overflow-y-auto shadow-2xl animate-slideIn">
                  <div className="sticky top-0 bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6 rounded-t-2xl flex justify-between items-center">
                    <div className="flex items-center gap-3">
                      <Brain className="w-8 h-8" />
                      <div>
                        <h2 className="text-2xl font-bold">Report AI Generato</h2>
                        <p className="text-sm text-white/80">
                          {new Date(currentReport.date).toLocaleDateString('it-IT', {
                            day: 'numeric',
                            month: 'long',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                          })}
                        </p>
                      </div>
                    </div>
                    <button
                      onClick={() => setShowReportModal(false)}
                      className="p-2 hover:bg-white/20 rounded-lg transition-colors"
                    >
                      <X className="w-6 h-6" />
                    </button>
                  </div>

                  <div className="p-8">
                    <div className="prose prose-sm max-w-none text-gray-700 whitespace-pre-line leading-relaxed">
                      {currentReport.content}
                    </div>

                    <div className="mt-6 pt-6 border-t border-gray-200 grid grid-cols-3 gap-4">
                      <div className="text-center">
                        <div className="text-2xl font-bold text-purple-600">{currentReport.stats.totalMoods}</div>
                        <div className="text-sm text-gray-600">Mood tracciati</div>
                      </div>
                      <div className="text-center">
                        <div className="text-2xl font-bold text-pink-600">{currentReport.stats.avgMood.toFixed(1)}/5</div>
                        <div className="text-sm text-gray-600">Mood medio</div>
                      </div>
                      <div className="text-center">
                        <div className="text-2xl font-bold text-blue-600">
                          {currentReport.stats.trend > 0 ? 'ğŸ“ˆ' : currentReport.stats.trend < 0 ? 'ğŸ“‰' : 'â¡ï¸'}
                        </div>
                        <div className="text-sm text-gray-600">Trend</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          };

          const ApiSetupModal = () => (
            <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-8 shadow-2xl">
                <div className="flex justify-between items-start mb-6">
                  <div>
                    <h2 className="text-2xl font-bold text-gray-800 mb-2">ğŸ¤– Configurazione Gemini API</h2>
                    <p className="text-gray-600">Attiva AI per esercizi personalizzati infiniti</p>
                  </div>
                  <button 
                    onClick={() => setShowApiSetup(false)} 
                    className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                  >
                    <X className="w-6 h-6" />
                  </button>
                </div>

                <div className="space-y-6">
                  <div className="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200">
                    <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                      <Sparkles className="w-5 h-5 text-purple-600" />
                      Vantaggi ModalitÃ  API
                    </h3>
                    <ul className="space-y-2 text-gray-700">
                      <li className="flex items-start gap-2">
                        <CheckCircle className="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0" />
                        <span><strong>Esercizi infiniti:</strong> Contenuti sempre nuovi e diversi</span>
                      </li>
                      <li className="flex items-start gap-2">
                        <CheckCircle className="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0" />
                        <span><strong>Personalizzati:</strong> Esercizi specifici per il tuo contesto artistico</span>
                      </li>
                      <li className="flex items-start gap-2">
                        <CheckCircle className="w-5 h-5 text-green-600 mt-0.5 flex-shrink-0" />
                        <span><strong>Gratis:</strong> Google Gemini API ha un tier gratuito generoso (60 richieste/minuto)</span>
                      </li>
                    </ul>
                  </div>

                  <div className="space-y-4">
                    <h3 className="font-bold text-lg">ğŸ“‹ Setup Veloce (5 minuti)</h3>
                    <div className="space-y-3">
                      {[
                        { 
                          n: 1, 
                          title: "Vai su Google AI Studio", 
                          content: <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline text-sm flex items-center gap-1">https://aistudio.google.com/app/apikey <span className="text-xs">ğŸ”—</span></a> 
                        },
                        { n: 2, title: "Accedi con Google", content: "Usa qualsiasi account Gmail personale" },
                        { n: 3, title: 'Click "Create API Key"', content: "Scegli progetto esistente o crea nuovo" },
                        { n: 4, title: "Copia la tua API Key", content: "Stringa tipo: AIzaSy..." },
                        { n: 5, title: "Incolla qui sotto", content: "Salvata solo sul tuo dispositivo, 100% privata" }
                      ].map(step => (
                        <div key={step.n} className="flex gap-3">
                          <div className="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">
                            {step.n}
                          </div>
                          <div className="flex-1">
                            <p className="font-semibold mb-1">{step.title}</p>
                            <div className="text-sm text-gray-600">{step.content}</div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div>
                    <label className="block font-semibold mb-2 flex items-center gap-2">
                      <Key className="w-5 h-5" />
                      Inserisci la tua API Key
                    </label>
                    <input
                      type="password"
                      value={geminiApiKey}
                      onChange={(e) => setGeminiApiKey(e.target.value)}
                      placeholder="AIzaSy..."
                      className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none font-mono text-sm"
                    />
                    <p className="text-xs text-gray-500 mt-2 flex items-center gap-1">
                      ğŸ”’ Salvata solo localmente nel browser, mai inviata a server esterni
                    </p>
                  </div>

                  <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded">
                    <div className="flex gap-3">
                      <AlertCircle className="w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5" />
                      <div className="text-sm text-yellow-800">
                        <p className="font-semibold mb-1">âš ï¸ Sicurezza</p>
                        <p>Non condividere mai la tua API key. Il tier gratuito di Gemini ha limiti che proteggono da abusi accidentali.</p>
                      </div>
                    </div>
                  </div>

                  <div className="flex gap-3 flex-wrap">
                    <button
                      onClick={saveApiKey}
                      disabled={!geminiApiKey.trim()}
                      className="flex-1 min-w-[150px] bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      ğŸ’¾ Salva API Key
                    </button>
                    <button
                      onClick={() => setShowApiSetup(false)}
                      className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
                    >
                      Chiudi
                    </button>
                  </div>

                  {geminiApiKey && (
                    <div className="bg-green-50 border-l-4 border-green-400 p-4 rounded animate-fadeIn">
                      <div className="flex items-center gap-2 text-green-800">
                        <CheckCircle className="w-5 h-5" />
                        <span className="font-semibold">API Key configurata!</span>
                      </div>
                      <p className="text-sm text-green-700 mt-1">
                        Ora puoi attivare la modalitÃ  API negli esercizi per generare contenuti infiniti 
                      </p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          );

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-4">
              <div className="max-w-5xl mx-auto py-6">
                <div className="bg-white rounded-3xl shadow-2xl p-6 md:p-8">
                  {currentView === 'home' && <HomeView />}
                  {currentView === 'mood' && <MoodView />}
                  {currentView === 'journal' && <JournalView />}
                  {currentView === 'exercises' && <ExercisesView />}
                  {currentView === 'exercise-detail' && <ExerciseDetailView />}
                  {currentView === 'progress' && <ProgressView />}
                  {currentView === 'insights' && <InsightsView />}
                </div>

                <div className="text-center mt-6 text-gray-500 text-sm space-y-2">
                  <p>ğŸ¨ Artist Mental Health Coach v2.0</p>
                  <p className="mt-1">Made with â¤ï¸ for artists â€¢ 80+ esercizi</p>
                  <div className="mt-4 pt-4 border-t border-gray-200">
                    <p className="text-gray-600 font-medium">Ideato e creato da: Francesco Mariano</p>
                    <p className="text-gray-500 text-xs mt-1">20 marzo 2023</p>
                    <p className="text-gray-600 mt-2">
                      Contatti: <a href="mailto:francescomariano@gmail.com" className="text-purple-600 hover:text-purple-800 underline">francescomariano@gmail.com</a>
                    </p>
                  </div>
                </div>
              </div>

              {showApiSetup && <ApiSetupModal />}
              <ReportModal />

              {apiKeySaved && (
                <div className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-fadeIn z-50">
                  <CheckCircle className="w-5 h-5" />
                  API Key salvata con successo!
                </div>
              )}
            </div>
          );
        };

        ReactDOM.render(<MentalHealthCoachArte />, document.getElementById('root'));
    </script>
</body>
</html>
